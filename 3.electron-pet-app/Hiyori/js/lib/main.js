parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"qV/H":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0,exports.Live2DCubismFramework=t,function(t){var e=function(){function t(t){this.s=t}return t.prototype.append=function(t,e){return this.s+=void 0!==e?t.substr(0,e):t,this},t.prototype.expansion=function(t,e){for(var r=0;r<t;r++)this.append(e);return this},t.prototype.getBytes=function(){return encodeURIComponent(this.s).replace(/%../g,"x").length},t.prototype.getLength=function(){return this.s.length},t.prototype.isLess=function(t){return this.s<t.s},t.prototype.isGreat=function(t){return this.s>t.s},t.prototype.isEqual=function(t){return this.s==t},t.prototype.isEmpty=function(){return 0==this.s.length},t}();t.csmString=e}(t||(exports.Live2DCubismFramework=t={}));
},{}],"f6Rh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CSM_LOG_LEVEL=exports.CSM_LOG_LEVEL_OFF=exports.CSM_LOG_LEVEL_ERROR=exports.CSM_LOG_LEVEL_WARNING=exports.CSM_LOG_LEVEL_INFO=exports.CSM_LOG_LEVEL_DEBUG=exports.CSM_LOG_LEVEL_VERBOSE=void 0;var L=0;exports.CSM_LOG_LEVEL_VERBOSE=L;var _=1;exports.CSM_LOG_LEVEL_DEBUG=_;var E=2;exports.CSM_LOG_LEVEL_INFO=E;var r=3;exports.CSM_LOG_LEVEL_WARNING=r;var e=4;exports.CSM_LOG_LEVEL_ERROR=e;var O=5;exports.CSM_LOG_LEVEL_OFF=O;var t=L;exports.CSM_LOG_LEVEL=t;
},{}],"NrMG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=exports.CubismLogError=exports.CubismLogWarning=exports.CubismLogInfo=exports.CubismLogDebug=exports.CubismLogVerbose=exports.CSM_ASSERT=exports.CubismLogPrintIn=exports.CubismLogPrint=void 0;var o=require("../live2dcubismframework"),r=require("../cubismframeworkconfig"),e=function(o,r,e){u.CubismDebug.print(o,"[CSM]"+r,e)};exports.CubismLogPrint=e;var n=function(o,r,n){e(o,r+"\n",n)};exports.CubismLogPrintIn=n;var L=function(o){console.assert(o)};exports.CSM_ASSERT=L;var i=function(o){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e]};exports.CubismLogVerbose=i;var t=function(o){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e]};exports.CubismLogDebug=t;var g=function(o){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e]};exports.CubismLogInfo=g;var s=function(o){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e]};exports.CubismLogWarning=s;var u,v=function(o){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e]};exports.CubismLogError=v,r.CSM_LOG_LEVEL<=r.CSM_LOG_LEVEL_VERBOSE?(exports.CubismLogVerbose=i=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Verbose,"[V]"+r,e)},exports.CubismLogDebug=t=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Debug,"[D]"+r,e)},exports.CubismLogInfo=g=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Info,"[I]"+r,e)},exports.CubismLogWarning=s=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Warning,"[W]"+r,e)},exports.CubismLogError=v=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Error,"[E]"+r,e)}):r.CSM_LOG_LEVEL==r.CSM_LOG_LEVEL_DEBUG?(exports.CubismLogDebug=t=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Debug,"[D]"+r,e)},exports.CubismLogInfo=g=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Info,"[I]"+r,e)},exports.CubismLogWarning=s=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Warning,"[W]"+r,e)},exports.CubismLogError=v=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Error,"[E]"+r,e)}):r.CSM_LOG_LEVEL==r.CSM_LOG_LEVEL_INFO?(exports.CubismLogInfo=g=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Info,"[I]"+r,e)},exports.CubismLogWarning=s=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Warning,"[W]"+r,e)},exports.CubismLogError=v=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Error,"[E]"+r,e)}):r.CSM_LOG_LEVEL==r.CSM_LOG_LEVEL_WARNING?(exports.CubismLogWarning=s=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Warning,"[W]"+r,e)},exports.CubismLogError=v=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Error,"[E]"+r,e)}):r.CSM_LOG_LEVEL==r.CSM_LOG_LEVEL_ERROR&&(exports.CubismLogError=v=function(r){for(var e=[],L=1;L<arguments.length;L++)e[L-1]=arguments[L];n(o.LogLevel.LogLevel_Error,"[E]"+r,e)}),exports.Live2DCubismFramework=u,function(r){var e=function(){function r(){}return r.print=function(r,e,n){if(!(r<o.Live2DCubismFramework.CubismFramework.getLoggingLevel())){var L=o.Live2DCubismFramework.CubismFramework.coreLogFunction;if(L)L(e.replace(/\{(\d+)\}/g,function(o,r){return n[r]}))}},r.dumpBytes=function(o,r,e){for(var n=0;n<e;n++)n%16==0&&n>0?this.print(o,"\n"):n%8==0&&n>0&&this.print(o,"  "),this.print(o,"{0} ",[255&r[n]]);this.print(o,"\n")},r}();r.CubismDebug=e}(u||(exports.Live2DCubismFramework=u={}));
},{"../live2dcubismframework":"0unu","../cubismframeworkconfig":"f6Rh"}],"MeuK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,t=require("../utils/cubismdebug");exports.Live2DCubismFramework=e,function(e){var i=function(){return function(e,t){this.first=null==e?null:e,this.second=null==t?null:t}}();e.csmPair=i;var s=function(){function e(e){null!=e?e<1?(this._keyValues=new Array,this._dummyValue=null,this._size=0):(this._keyValues=new Array(e),this._size=e):(this._keyValues=new Array,this._dummyValue=null,this._size=0)}return e.prototype.release=function(){this.clear()},e.prototype.appendKey=function(e){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new i(e),this._size+=1},e.prototype.getValue=function(e){for(var t=-1,i=0;i<this._size;i++)if(this._keyValues[i].first==e){t=i;break}return t>=0?this._keyValues[t].second:(this.appendKey(e),this._keyValues[this._size-1].second)},e.prototype.setValue=function(e,t){for(var i=-1,s=0;s<this._size;s++)if(this._keyValues[s].first==e){i=s;break}i>=0?this._keyValues[i].second=t:(this.appendKey(e),this._keyValues[this._size-1].second=t)},e.prototype.isExist=function(e){for(var t=0;t<this._size;t++)if(this._keyValues[t].first==e)return!0;return!1},e.prototype.clear=function(){this._keyValues=void 0,this._keyValues=null,this._keyValues=new Array,this._size=0},e.prototype.getSize=function(){return this._size},e.prototype.prepareCapacity=function(t,i){t>this._keyValues.length&&(0==this._keyValues.length?(!i&&t<e.DefaultSize&&(t=e.DefaultSize),this._keyValues.length=t):(!i&&t<2*this._keyValues.length&&(t=2*this._keyValues.length),this._keyValues.length=t))},e.prototype.begin=function(){return new n(this,0)},e.prototype.end=function(){return new n(this,this._size)},e.prototype.erase=function(e){var t=e._index;return t<0||this._size<=t?e:(this._keyValues.splice(t,1),--this._size,new n(this,t))},e.prototype.dumpAsInt=function(){for(var e=0;e<this._size;e++)(0,t.CubismLogDebug)("{0} ,",this._keyValues[e]),(0,t.CubismLogDebug)("\n")},e.DefaultSize=10,e}();e.csmMap=s;var n=function(){function e(e,t){this._map=null!=e?e:new s,this._index=null!=t?t:0}return e.prototype.set=function(e){return this._index=e._index,this._map=e._map,this},e.prototype.preIncrement=function(){return++this._index,this},e.prototype.preDecrement=function(){return--this._index,this},e.prototype.increment=function(){var t=new e(this._map,this._index++);return this._map=t._map,this._index=t._index,this},e.prototype.decrement=function(){var t=new e(this._map,this._index);return this._map=t._map,this._index=t._index,this},e.prototype.ptr=function(){return this._map._keyValues[this._index]},e.prototype.notEqual=function(e){return this._index!=e._index||this._map!=e._map},e}();e.iterator=n}(e||(exports.Live2DCubismFramework=e={}));
},{"../utils/cubismdebug":"NrMG"}],"UWg4":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0,exports.Live2DCubismFramework=t,function(t){var i=function(){function t(t){void 0===t&&(t=0),t<1?(this._ptr=new Array,this._capacity=0,this._size=0):(this._ptr=new Array(t),this._capacity=t,this._size=0)}return t.prototype.at=function(t){return this._ptr[t]},t.prototype.set=function(t,i){this._ptr[t]=i},t.prototype.get=function(t){void 0===t&&(t=0);for(var i=new Array,e=t;e<this._size;e++)i.push(this._ptr[e]);return i},t.prototype.pushBack=function(i){this._size>=this._capacity&&this.prepareCapacity(0==this._capacity?t.s_defaultSize:2*this._capacity),this._ptr[this._size++]=i},t.prototype.clear=function(){this._ptr.length=0,this._size=0},t.prototype.getSize=function(){return this._size},t.prototype.assign=function(t,i){this._size<t&&this.prepareCapacity(t);for(var e=0;e<t;e++)this._ptr[e]=i;this._size=t},t.prototype.resize=function(t,i){void 0===i&&(i=null),this.updateSize(t,i,!0)},t.prototype.updateSize=function(t,i,e){if(void 0===i&&(i=null),void 0===e&&(e=!0),this._size<t)if(this.prepareCapacity(t),e)for(var r=this._size;r<t;r++)this._ptr[r]="function"==typeof i?JSON.parse(JSON.stringify(new i)):i;else for(r=this._size;r<t;r++)this._ptr[r]=i;else{var s=this._size-t;this._ptr.splice(this._size-s,s)}this._size=t},t.prototype.insert=function(t,i,e){var r=t._index,s=i._index,n=e._index,o=n-s;this.prepareCapacity(this._size+o);var p=this._size-r;if(p>0)for(var h=0;h<p;h++)this._ptr.splice(r+h,0,null);for(h=s;h<n;h++,r++)this._ptr[r]=i._vector._ptr[h];this._size=this._size+o},t.prototype.remove=function(t){return!(t<0||this._size<=t)&&(this._ptr.splice(t,1),--this._size,!0)},t.prototype.erase=function(t){var i=t._index;return i<0||this._size<=i?t:(this._ptr.splice(i,1),--this._size,new e(this,i))},t.prototype.prepareCapacity=function(t){t>this._capacity&&(0==this._capacity?(this._ptr=new Array(t),this._capacity=t):(this._ptr.length=t,this._capacity=t))},t.prototype.begin=function(){return 0==this._size?this.end():new e(this,0)},t.prototype.end=function(){return new e(this,this._size)},t.prototype.getOffset=function(i){var e=new t;return e._ptr=this.get(i),e._size=this.get(i).length,e._capacity=this.get(i).length,e},t.s_defaultSize=10,t}();t.csmVector=i;var e=function(){function t(t,i){this._vector=null!=t?t:null,this._index=null!=i?i:0}return t.prototype.set=function(t){return this._index=t._index,this._vector=t._vector,this},t.prototype.preIncrement=function(){return++this._index,this},t.prototype.preDecrement=function(){return--this._index,this},t.prototype.increment=function(){var i=new t(this._vector,this._index++);return this._vector=i._vector,this._index=i._index,this},t.prototype.decrement=function(){var i=new t(this._vector,this._index--);return this._vector=i._vector,this._index=i._index,this},t.prototype.ptr=function(){return this._vector._ptr[this._index]},t.prototype.substitution=function(t){return this._index=t._index,this._vector=t._vector,this},t.prototype.notEqual=function(t){return this._index!=t._index||this._vector!=t._vector},t}();t.iterator=e}(t||(exports.Live2DCubismFramework=t={}));
},{}],"vr2H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var r,t=require("../type/csmstring"),e=require("../type/csmmap"),n=require("../type/csmvector"),o=require("./cubismdebug"),i=require("../live2dcubismframework"),u=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),s=n.Live2DCubismFramework.csmVector,a=e.Live2DCubismFramework.csmMap,l=t.Live2DCubismFramework.csmString;exports.Live2DCubismFramework=r,function(r){var t=function(){function r(){}return r.prototype.getRawString=function(r,t){return this.getString(r,t)},r.prototype.toInt=function(r){return void 0===r&&(r=0),r},r.prototype.toFloat=function(r){return void 0===r&&(r=0),r},r.prototype.toBoolean=function(r){return void 0===r&&(r=!1),r},r.prototype.getSize=function(){return 0},r.prototype.getArray=function(r){return void 0===r&&(r=null),r},r.prototype.getVector=function(r){return r},r.prototype.getMap=function(r){return r},r.prototype.getValueByIndex=function(t){return r.errorValue.setErrorNotForClientCall("Error: type mismatch")},r.prototype.getValueByString=function(t){return r.nullValue.setErrorNotForClientCall("Error: type mismatch")},r.prototype.getKeys=function(){return r.s_dummyKeys},r.prototype.isError=function(){return!1},r.prototype.isNull=function(){return!1},r.prototype.isBool=function(){return!1},r.prototype.isFloat=function(){return!1},r.prototype.isString=function(){return!1},r.prototype.isArray=function(){return!1},r.prototype.isMap=function(){return!1},r.prototype.equals=function(r){return!1},r.prototype.isStatic=function(){return!1},r.prototype.setErrorNotForClientCall=function(r){return f.errorValue},r.staticInitializeNotForClientCall=function(){p.trueValue=new p(!0),p.falseValue=new p(!1),f.errorValue=new f("ERROR",!0),this.nullValue=new h,r.s_dummyKeys=new s},r.staticReleaseNotForClientCall=function(){p.trueValue=null,p.falseValue=null,f.errorValue=null,r.nullValue=null,r.s_dummyKeys=null,p.trueValue=null,p.falseValue=null,f.errorValue=null,r.nullValue=null,r.s_dummyKeys=null},r}();r.Value=t;var e=function(){function r(r,t){this._error=null,this._lineCount=0,this._root=null,null!=r&&this.parseBytes(r,t)}return r.create=function(t,e){var n=new r;return n.parseBytes(t,e)?n:(r.delete(n),null)},r.delete=function(r){null},r.prototype.getRoot=function(){return this._root},r.prototype.arrayBufferToString=function(r){for(var t=new Uint8Array(r),e="",n=0,o=t.length;n<o;++n)e+="%"+this.pad(t[n].toString(16));return e=decodeURIComponent(e)},r.prototype.pad=function(r){return r.length<2?"0"+r:r},r.prototype.parseBytes=function(r,t){var e=new Array(1),n=this.arrayBufferToString(r);if(this._root=this.parseValue(n,t,0,e),this._error){var i;return i="Json parse error : @line "+(this._lineCount+1)+"\n",this._root=new c(i),(0,o.CubismLogInfo)("{0}",this._root.getRawString()),!1}return null!=this._root||(this._root=new f(new l(this._error),!1),!1)},r.prototype.getParseError=function(){return this._error},r.prototype.checkEndOfFile=function(){return this._root.getArray()[1].equals("EOF")},r.prototype.parseValue=function(r,t,e,o){if(this._error)return null;for(var u,s=null,a=e;a<t;a++){switch(r[a]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":var l=new Array(1);return u=(0,i.strtod)(r.slice(a),l),o[0]=r.indexOf(l[0]),new n(u);case'"':return new c(this.parseString(r,t,a+1,o));case"[":return s=this.parseArray(r,t,a+1,o);case"{":return s=this.parseObject(r,t,a+1,o);case"n":return a+3<t?(s=new h,o[0]=a+4):this._error="parse null",s;case"t":return a+3<t?(s=p.trueValue,o[0]=a+4):this._error="parse true",s;case"f":return a+4<t?(s=p.falseValue,o[0]=a+5):this._error="illegal ',' position",s;case",":return this._error="illegal ',' position",null;case"]":return o[0]=a,null;case"\n":this._lineCount++}}return this._error="illegal end of value",null},r.prototype.parseString=function(r,t,e,n){if(this._error)return null;for(var o=e,i=new l(""),u=e;o<t;o++)switch(r[o]){case'"':return n[0]=o+1,i.append(r.slice(u),o-u),i.s;case"//":if(++o-1>u&&i.append(r.slice(u),o-u),u=o+1,o<t)switch(r[o]){case"\\":i.expansion(1,"\\");break;case'"':i.expansion(1,'"');break;case"/":i.expansion(1,"/");break;case"b":i.expansion(1,"\b");break;case"f":i.expansion(1,"\f");break;case"n":i.expansion(1,"\n");break;case"r":i.expansion(1,"\r");break;case"t":i.expansion(1,"\t");break;case"u":this._error="parse string/unicord escape not supported"}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null},r.prototype.parseObject=function(r,t,e,n){if(this._error)return null;for(var o=new _,i="",u=e,s=Array(1),a=!1;u<t;u++){r:for(;u<t;u++)switch(r[u]){case'"':if(i=this.parseString(r,t,u+1,s),this._error)return null;u=s[0],a=!0;break r;case"}":return n[0]=u+1,o;case":":this._error="illegal ':' position";break;case"\n":this._lineCount++}if(!a)return this._error="key not found",null;a=!1;r:for(;u<t;u++)switch(r[u]){case":":a=!0,u++;break r;case"}":this._error="illegal '}' position";break;case"\n":this._lineCount++}if(!a)return this._error="':' not found",null;var l=this.parseValue(r,t,u,s);if(this._error)return null;u=s[0],o.put(i,l);r:for(;u<t;u++)switch(r[u]){case",":break r;case"}":return n[0]=u+1,o;case"\n":this._lineCount++}}return this._error="illegal end of perseObject",null},r.prototype.parseArray=function(r,t,e,n){if(this._error)return null;for(var o=new y,i=e,u=new Array(1);i<t;i++){var s=this.parseValue(r,t,i,u);if(this._error)return null;i=u[0],s&&o.add(s);r:for(;i<t;i++)switch(r[i]){case",":break r;case"]":return n[0]=i+1,o;case"\n":++this._lineCount}}return o=void 0,this._error="illegal end of parseObject",null},r}();r.CubismJson=e;var n=function(r){function t(t){var e=r.call(this)||this;return e._value=t,e}return u(t,r),t.prototype.isFloat=function(){return!0},t.prototype.getString=function(r,t){return this._value=parseFloat("\0"),this._stringBuffer="\0",this._stringBuffer},t.prototype.toInt=function(r){return void 0===r&&(r=0),parseInt(this._value.toString())},t.prototype.toFloat=function(r){return void 0===r&&(r=0),this._value},t.prototype.equals=function(r){return"number"==typeof r&&(!Math.round(r)&&r==this._value)},t}(t);r.JsonFloat=n;var p=function(r){function t(t){var e=r.call(this)||this;return e._boolValue=t,e}return u(t,r),t.prototype.isBool=function(){return!0},t.prototype.toBoolean=function(r){return void 0===r&&(r=!1),this._boolValue},t.prototype.getString=function(r,t){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer},t.prototype.equals=function(r){return"boolean"==typeof r&&r==this._boolValue},t.prototype.isStatic=function(){return!0},t}(t);r.JsonBoolean=p;var c=function(r){function t(t){var e=r.call(this)||this;return"string"==typeof t&&(e._stringBuffer=t),t instanceof l&&(e._stringBuffer=t.s),e}return u(t,r),t.prototype.isString=function(){return!0},t.prototype.getString=function(r,t){return this._stringBuffer},t.prototype.equals=function(r){return"string"==typeof r?this._stringBuffer==r:r instanceof l&&this._stringBuffer==r.s},t}(t);r.JsonString=c;var f=function(r){function t(t,e){var n=this;return(n=r.call(this,t)||this)._isStatic=e,n}return u(t,r),t.prototype.isStatic=function(){return this._isStatic},t.prototype.setErrorNotForClientCall=function(r){return this._stringBuffer=r,this},t.prototype.isError=function(){return!0},t}(c);r.JsonError=f;var h=function(r){function t(){var t=r.call(this)||this;return t._stringBuffer="NullValue",t}return u(t,r),t.prototype.isNull=function(){return!0},t.prototype.getString=function(r,t){return this._stringBuffer},t.prototype.isStatic=function(){return!0},t}(t);r.JsonNullvalue=h;var y=function(r){function e(){var t=r.call(this)||this;return t._array=new s,t}return u(e,r),e.prototype.release=function(){for(var r=this._array.begin();r.notEqual(this._array.end());r.preIncrement()){var t=r.ptr();t&&!t.isStatic()&&(t=void 0,t=null)}},e.prototype.isArray=function(){return!0},e.prototype.getValueByIndex=function(r){if(r<0||this._array.getSize()<=r)return t.errorValue.setErrorNotForClientCall("Error: index out of bounds");var e=this._array.at(r);return null==e?t.nullValue:e},e.prototype.getValueByString=function(r){return t.errorValue.setErrorNotForClientCall("Error: type mismatch")},e.prototype.getString=function(r,t){for(var e=t+"[\n",n=this._array.begin();n.notEqual(this._array.end());n.increment()){var o=n.ptr();this._stringBuffer+=t+""+o.getString(t+" ")+"\n"}return this._stringBuffer=e+t+"]\n",this._stringBuffer},e.prototype.add=function(r){this._array.pushBack(r)},e.prototype.getVector=function(r){return void 0===r&&(r=null),this._array},e.prototype.getSize=function(){return this._array.getSize()},e}(t);r.JsonArray=y;var _=function(r){function e(){var t=r.call(this)||this;return t._map=new a,t}return u(e,r),e.prototype.release=function(){for(var r=this._map.begin();r.notEqual(this._map.end());){var t=r.ptr().second;t&&!t.isStatic()&&(t=void 0,t=null),r.preIncrement()}},e.prototype.isMap=function(){return!0},e.prototype.getValueByString=function(r){if(r instanceof l){var e=this._map.getValue(r.s);return null==e?t.nullValue:e}for(var n=this._map.begin();n.notEqual(this._map.end());n.preIncrement())if(n.ptr().first==r)return null==n.ptr().second?t.nullValue:n.ptr().second;return t.nullValue},e.prototype.getValueByIndex=function(r){return t.errorValue.setErrorNotForClientCall("Error: type mismatch")},e.prototype.getString=function(r,t){this._stringBuffer=t+"{\n";for(var e=this._map.begin();e.notEqual(this._map.end());){var n=e.ptr().first,o=e.ptr().second;this._stringBuffer+=t+" "+n+" : "+o.getString(t+"   ")+" \n",e.preIncrement()}return this._stringBuffer+=t+"}\n",this._stringBuffer},e.prototype.getMap=function(r){return this._map},e.prototype.put=function(r,t){this._map.setValue(r,t)},e.prototype.getKeys=function(){if(!this._keys){this._keys=new s;for(var r=this._map.begin();r.notEqual(this._map.end());){var t=r.ptr().first;this._keys.pushBack(t),r.preIncrement()}}return this._keys},e.prototype.getSize=function(){return this._keys.getSize()},e}(t);r.JsonMap=_}(r||(exports.Live2DCubismFramework=r={}));
},{"../type/csmstring":"qV/H","../type/csmmap":"MeuK","../type/csmvector":"UWg4","./cubismdebug":"NrMG","../live2dcubismframework":"0unu"}],"DxkJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var i,t=require("../type/csmstring"),s=t.Live2DCubismFramework.csmString;exports.Live2DCubismFramework=i,function(i){var t=function(){function i(i){this._id="string"!=typeof i?i:new s(i)}return i.prototype.getString=function(){return this._id},i.prototype.isEqual=function(t){return"string"==typeof t?this._id.isEqual(t):t instanceof s?this._id.isEqual(t.s):t instanceof i&&this._id.isEqual(t._id.s)},i.prototype.isNotEqual=function(t){return"string"==typeof t?!this._id.isEqual(t):t instanceof s?!this._id.isEqual(t.s):t instanceof i&&!this._id.isEqual(t._id.s)},i}();i.CubismId=t}(i||(exports.Live2DCubismFramework=i={}));
},{"../type/csmstring":"qV/H"}],"3gGH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,i=require("../type/csmvector"),e=require("./cubismid"),r=e.Live2DCubismFramework.CubismId,s=i.Live2DCubismFramework.csmVector;exports.Live2DCubismFramework=t,function(t){var i=function(){function t(){this._ids=new s}return t.prototype.release=function(){for(var t=0;t<this._ids.getSize();++t)this._ids.set(t,void 0);this._ids=null},t.prototype.registerIds=function(t){for(var i=0;i<t.length;i++)this.registerId(t[i])},t.prototype.registerId=function(t){var i=null;return"string"!=typeof t?this.registerId(t.s):null!=(i=this.findId(t))?i:(i=new r(t),this._ids.pushBack(i),i)},t.prototype.getId=function(t){return this.registerId(t)},t.prototype.isExist=function(t){return"string"==typeof t?null!=this.findId(t):this.isExist(t.s)},t.prototype.findId=function(t){for(var i=0;i<this._ids.getSize();++i)if(this._ids.at(i).getString().isEqual(t))return this._ids.at(i);return null},t}();t.CubismIdManager=i}(t||(exports.Live2DCubismFramework=t={}));
},{"../type/csmvector":"UWg4","./cubismid":"DxkJ"}],"pAzm":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0,exports.Live2DCubismFramework=t,function(t){var r=function(){function t(){this._tr=new Float32Array(16),this.loadIdentity()}return t.multiply=function(t,r,o){for(var e=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=0;n<4;++n)for(var i=0;i<4;++i)for(var s=0;s<4;++s)e[i+4*n]+=t[s+4*n]*r[i+4*s];for(n=0;n<16;++n)o[n]=e[n]},t.prototype.loadIdentity=function(){var t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)},t.prototype.setMatrix=function(t){for(var r=0;r<16;++r)this._tr[r]=t[r]},t.prototype.getArray=function(){return this._tr},t.prototype.getScaleX=function(){return this._tr[0]},t.prototype.getScaleY=function(){return this._tr[5]},t.prototype.getTranslateX=function(){return this._tr[12]},t.prototype.getTranslateY=function(){return this._tr[13]},t.prototype.transformX=function(t){return this._tr[0]*t+this._tr[12]},t.prototype.transformY=function(t){return this._tr[5]*t+this._tr[13]},t.prototype.invertTransformX=function(t){return(t-this._tr[12])/this._tr[0]},t.prototype.invertTransformY=function(t){return(t-this._tr[13])/this._tr[5]},t.prototype.translateRelative=function(r,o){var e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,r,o,0,1]);t.multiply(e,this._tr,this._tr)},t.prototype.translate=function(t,r){this._tr[12]=t,this._tr[13]=r},t.prototype.translateX=function(t){this._tr[12]=t},t.prototype.translateY=function(t){this._tr[13]=t},t.prototype.scaleRelative=function(r,o){var e=new Float32Array([r,0,0,0,0,o,0,0,0,0,1,0,0,0,0,1]);t.multiply(e,this._tr,this._tr)},t.prototype.scale=function(t,r){this._tr[0]=t,this._tr[5]=r},t.prototype.multiplyByMatrix=function(r){t.multiply(r.getArray(),this._tr,this._tr)},t.prototype.clone=function(){for(var r=new t,o=0;o<this._tr.length;o++)r._tr[o]=this._tr[o];return r},t}();t.CubismMatrix44=r}(t||(exports.Live2DCubismFramework=t={}));
},{}],"ttDA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,i=require("../math/cubismmatrix44"),e=i.Live2DCubismFramework.CubismMatrix44;exports.Live2DCubismFramework=t,function(t){var i=function(){function t(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._model=null,this._modelColor=new o,this._mvpMatrix4x4=new e,this._mvpMatrix4x4.loadIdentity()}return t.create=function(){return null},t.delete=function(t){null},t.prototype.initialize=function(t){this._model=t},t.prototype.drawModel=function(){null!=this.getModel()&&this.doDrawModel()},t.prototype.setMvpMatrix=function(t){this._mvpMatrix4x4.setMatrix(t.getArray())},t.prototype.getMvpMatrix=function(){return this._mvpMatrix4x4},t.prototype.setModelColor=function(t,i,e,o){t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),e<0?e=0:e>1&&(e=1),o<0?o=0:o>1&&(o=1),this._modelColor.R=t,this._modelColor.G=i,this._modelColor.B=e,this._modelColor.A=o},t.prototype.getModelColor=function(){return JSON.parse(JSON.stringify(this._modelColor))},t.prototype.setIsPremultipliedAlpha=function(t){this._isPremultipliedAlpha=t},t.prototype.isPremultipliedAlpha=function(){return this._isPremultipliedAlpha},t.prototype.setIsCulling=function(t){this._isCulling=t},t.prototype.isCulling=function(){return this._isCulling},t.prototype.setAnisotropy=function(t){this._anisortopy=t},t.prototype.getAnisotropy=function(){return this._anisortopy},t.prototype.getModel=function(){return this._model},t}();t.CubismRenderer=i,function(t){t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative"}(t.CubismBlendMode||(t.CubismBlendMode={}));var o=function(){return function(){this.R=1,this.G=1,this.B=1,this.A=1}}();t.CubismTextureColor=o}(t||(exports.Live2DCubismFramework=t={}));
},{"../math/cubismmatrix44":"pAzm"}],"0unu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.strtod=a,exports.LogLevel=exports.Option=exports.Live2DCubismFramework=void 0;var e,i=require("./utils/cubismjson"),o=require("./id/cubismidmanager"),r=require("./rendering/cubismrenderer"),n=require("./utils/cubismdebug"),t=i.Live2DCubismFramework.Value,s=o.Live2DCubismFramework.CubismIdManager,u=r.Live2DCubismFramework.CubismRenderer;function a(e,i){for(var o=0,r=1;;r++){var n=e.slice(r-1,r);if("e"!=n&&"-"!=n&&"E"!=n){var t=e.substring(0,r),s=Number(t);if(isNaN(s))break;o=r}}var u=parseFloat(e);return isNaN(u)&&(u=NaN),i[0]=e.slice(o),u}exports.Live2DCubismFramework=e,function(e){var i=!1,o=!1,r=null,a=null;!function(e){e.vertexOffset=0,e.vertexStep=2}(e.Constant||(e.Constant={})),e.csmDelete=function(e){e&&(e=void 0)};var L=function(){function e(){}return e.startUp=function(e){if(void 0===e&&(e=null),i)return(0,n.CubismLogInfo)("CubismFramework.startUp() is already done."),i;if(null!=(r=e)&&Live2DCubismCore.Logging.csmSetLogFunction(r.logFunction),i=!0){var o=Live2DCubismCore.Version.csmGetVersion(),t=(4278190080&o)>>24,s=(16711680&o)>>16,u=65535&o,a=o;(0,n.CubismLogInfo)("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+t).slice(-2),("00"+s).slice(-2),("0000"+u).slice(-4),a)}return(0,n.CubismLogInfo)("CubismFramework.startUp() is complete."),i},e.cleanUp=function(){i=!1,o=!1,r=null,a=null},e.initialize=function(){(0,n.CSM_ASSERT)(i),i?o?(0,n.CubismLogWarning)("CubismFramework.initialize() skipped, already initialized."):(t.staticInitializeNotForClientCall(),a=new s,o=!0,(0,n.CubismLogInfo)("CubismFramework.initialize() is complete.")):(0,n.CubismLogWarning)("CubismFramework is not started.")},e.dispose=function(){(0,n.CSM_ASSERT)(i),i?o?(t.staticReleaseNotForClientCall(),a.release(),a=null,u.staticRelease(),o=!1,(0,n.CubismLogInfo)("CubismFramework.dispose() is complete.")):(0,n.CubismLogWarning)("CubismFramework.dispose() skipped, not initialized."):(0,n.CubismLogWarning)("CubismFramework is not started.")},e.isStarted=function(){return i},e.isInitialized=function(){return o},e.coreLogFunction=function(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)},e.getLoggingLevel=function(){return null!=r?r.loggingLevel:l.LogLevel_Off},e.getIdManager=function(){return a},e}();e.CubismFramework=L}(e||(exports.Live2DCubismFramework=e={}));var l,L=function(){return function(){}}();exports.Option=L,exports.LogLevel=l,function(e){e[e.LogLevel_Verbose=0]="LogLevel_Verbose",e[e.LogLevel_Debug=1]="LogLevel_Debug",e[e.LogLevel_Info=2]="LogLevel_Info",e[e.LogLevel_Warning=3]="LogLevel_Warning",e[e.LogLevel_Error=4]="LogLevel_Error",e[e.LogLevel_Off=5]="LogLevel_Off"}(l||(exports.LogLevel=l={}));
},{"./utils/cubismjson":"vr2H","./id/cubismidmanager":"3gGH","./rendering/cubismrenderer":"ttDA","./utils/cubismdebug":"NrMG"}],"2uOW":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0,exports.Live2DCubismFramework=e,function(e){var r=function(){return function(){}}();e.ICubismModelSetting=r}(e||(exports.Live2DCubismFramework=e={}));
},{}],"A4Ig":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,t=require("./live2dcubismframework"),r=require("./icubismmodelsetting"),o=require("./utils/cubismjson"),s=require("./type/csmvector"),i=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=s.Live2DCubismFramework.csmVector,u=t.Live2DCubismFramework.CubismFramework,a=o.Live2DCubismFramework.CubismJson,l=r.Live2DCubismFramework.ICubismModelSetting;exports.Live2DCubismFramework=e,function(e){var t,r="FileReferences",o="Groups",s="HitAreas",g="Moc",p="Textures",y="Physics",_="Pose",V="Expressions",d="Motions",F="Name";!function(e){e[e.FrequestNode_Groups=0]="FrequestNode_Groups",e[e.FrequestNode_Moc=1]="FrequestNode_Moc",e[e.FrequestNode_Motions=2]="FrequestNode_Motions",e[e.FrequestNode_Expressions=3]="FrequestNode_Expressions",e[e.FrequestNode_Textures=4]="FrequestNode_Textures",e[e.FrequestNode_Physics=5]="FrequestNode_Physics",e[e.FrequestNode_Pose=6]="FrequestNode_Pose",e[e.FrequestNode_HitAreas=7]="FrequestNode_HitAreas"}(t||(t={}));var c=function(e){function l(t,i){var u=e.call(this)||this;return u._json=a.create(t,i),u._json&&(u._jsonValue=new n,u._jsonValue.pushBack(u._json.getRoot().getValueByString(o)),u._jsonValue.pushBack(u._json.getRoot().getValueByString(r).getValueByString(g)),u._jsonValue.pushBack(u._json.getRoot().getValueByString(r).getValueByString(d)),u._jsonValue.pushBack(u._json.getRoot().getValueByString(r).getValueByString(V)),u._jsonValue.pushBack(u._json.getRoot().getValueByString(r).getValueByString(p)),u._jsonValue.pushBack(u._json.getRoot().getValueByString(r).getValueByString(y)),u._jsonValue.pushBack(u._json.getRoot().getValueByString(r).getValueByString(_)),u._jsonValue.pushBack(u._json.getRoot().getValueByString(s))),u}return i(l,e),l.prototype.release=function(){a.delete(this._json),this._jsonValue=null},l.prototype.GetJson=function(){return this._json},l.prototype.getModelFileName=function(){return this.isExistModelFile()?this._jsonValue.at(t.FrequestNode_Moc).getRawString():""},l.prototype.getTextureCount=function(){return this.isExistTextureFiles()?this._jsonValue.at(t.FrequestNode_Textures).getSize():0},l.prototype.getTextureDirectory=function(){return this._jsonValue.at(t.FrequestNode_Textures).getRawString()},l.prototype.getTextureFileName=function(e){return this._jsonValue.at(t.FrequestNode_Textures).getValueByIndex(e).getRawString()},l.prototype.getHitAreasCount=function(){return this.isExistHitAreas()?this._jsonValue.at(t.FrequestNode_HitAreas).getSize():0},l.prototype.getHitAreaId=function(e){return u.getIdManager().getId(this._jsonValue.at(t.FrequestNode_HitAreas).getValueByIndex(e).getValueByString("Id").getRawString())},l.prototype.getHitAreaName=function(e){return this._jsonValue.at(t.FrequestNode_HitAreas).getValueByIndex(e).getValueByString(F).getRawString()},l.prototype.getPhysicsFileName=function(){return this.isExistPhysicsFile()?this._jsonValue.at(t.FrequestNode_Physics).getRawString():""},l.prototype.getPoseFileName=function(){return this.isExistPoseFile()?this._jsonValue.at(t.FrequestNode_Pose).getRawString():""},l.prototype.getExpressionCount=function(){return this.isExistExpressionFile()?this._jsonValue.at(t.FrequestNode_Expressions).getSize():0},l.prototype.getExpressionName=function(e){return this._jsonValue.at(t.FrequestNode_Expressions).getValueByIndex(e).getValueByString(F).getRawString()},l.prototype.getExpressionFileName=function(e){return this._jsonValue.at(t.FrequestNode_Expressions).getValueByIndex(e).getValueByString("File").getRawString()},l.prototype.getMotionGroupCount=function(){return this.isExistMotionGroups()?this._jsonValue.at(t.FrequestNode_Motions).getKeys().getSize():0},l.prototype.getMotionGroupName=function(e){return this.isExistMotionGroups()?this._jsonValue.at(t.FrequestNode_Motions).getKeys().at(e):null},l.prototype.getMotionCount=function(e){return this.isExistMotionGroupName(e)?this._jsonValue.at(t.FrequestNode_Motions).getValueByString(e).getSize():0},l.prototype.getMotionFileName=function(e,r){return this.isExistMotionGroupName(e)?this._jsonValue.at(t.FrequestNode_Motions).getValueByString(e).getValueByIndex(r).getValueByString("File").getRawString():""},l.prototype.getMotionSoundFileName=function(e,r){return this.isExistMotionSoundFile(e,r)?this._jsonValue.at(t.FrequestNode_Motions).getValueByString(e).getValueByIndex(r).getValueByString("Sound").getRawString():""},l.prototype.getMotionFadeInTimeValue=function(e,r){return this.isExistMotionFadeIn(e,r)?this._jsonValue.at(t.FrequestNode_Motions).getValueByString(e).getValueByIndex(r).getValueByString("FadeInTime").toFloat():-1},l.prototype.getMotionFadeOutTimeValue=function(e,r){return this.isExistMotionFadeOut(e,r)?this._jsonValue.at(t.FrequestNode_Motions).getValueByString(e).getValueByIndex(r).getValueByString("FadeOutTime").toFloat():-1},l.prototype.getUserDataFile=function(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(r).getValueByString("UserData").getRawString():""},l.prototype.getLayoutMap=function(e){var t=this._json.getRoot().getValueByString("Layout").getMap();if(null==t)return!1;for(var r=!1,o=t.begin();o.notEqual(t.end());o.preIncrement())e.setValue(o.ptr().first,o.ptr().second.toFloat()),r=!0;return r},l.prototype.getEyeBlinkParameterCount=function(){if(!this.isExistEyeBlinkParameters())return 0;for(var e=0,r=0;r<this._jsonValue.at(t.FrequestNode_Groups).getSize();r++){var o=this._jsonValue.at(t.FrequestNode_Groups).getValueByIndex(r);if(!o.isNull()&&!o.isError()&&"EyeBlink"==o.getValueByString(F).getRawString()){e=o.getValueByString("Ids").getVector().getSize();break}}return e},l.prototype.getEyeBlinkParameterId=function(e){if(!this.isExistEyeBlinkParameters())return null;for(var r=0;r<this._jsonValue.at(t.FrequestNode_Groups).getSize();r++){var o=this._jsonValue.at(t.FrequestNode_Groups).getValueByIndex(r);if(!o.isNull()&&!o.isError()&&"EyeBlink"==o.getValueByString(F).getRawString())return u.getIdManager().getId(o.getValueByString("Ids").getValueByIndex(e).getRawString())}return null},l.prototype.getLipSyncParameterCount=function(){if(!this.isExistLipSyncParameters())return 0;for(var e=0,r=0;r<this._jsonValue.at(t.FrequestNode_Groups).getSize();r++){var o=this._jsonValue.at(t.FrequestNode_Groups).getValueByIndex(r);if(!o.isNull()&&!o.isError()&&"LipSync"==o.getValueByString(F).getRawString()){e=o.getValueByString("Ids").getVector().getSize();break}}return e},l.prototype.getLipSyncParameterId=function(e){if(!this.isExistLipSyncParameters())return null;for(var r=0;r<this._jsonValue.at(t.FrequestNode_Groups).getSize();r++){var o=this._jsonValue.at(t.FrequestNode_Groups).getValueByIndex(r);if(!o.isNull()&&!o.isError()&&"LipSync"==o.getValueByString(F).getRawString())return u.getIdManager().getId(o.getValueByString("Ids").getValueByIndex(e).getRawString())}return null},l.prototype.isExistModelFile=function(){var e=this._jsonValue.at(t.FrequestNode_Moc);return!e.isNull()&&!e.isError()},l.prototype.isExistTextureFiles=function(){var e=this._jsonValue.at(t.FrequestNode_Textures);return!e.isNull()&&!e.isError()},l.prototype.isExistHitAreas=function(){var e=this._jsonValue.at(t.FrequestNode_HitAreas);return!e.isNull()&&!e.isError()},l.prototype.isExistPhysicsFile=function(){var e=this._jsonValue.at(t.FrequestNode_Physics);return!e.isNull()&&!e.isError()},l.prototype.isExistPoseFile=function(){var e=this._jsonValue.at(t.FrequestNode_Pose);return!e.isNull()&&!e.isError()},l.prototype.isExistExpressionFile=function(){var e=this._jsonValue.at(t.FrequestNode_Expressions);return!e.isNull()&&!e.isError()},l.prototype.isExistMotionGroups=function(){var e=this._jsonValue.at(t.FrequestNode_Motions);return!e.isNull()&&!e.isError()},l.prototype.isExistMotionGroupName=function(e){var r=this._jsonValue.at(t.FrequestNode_Motions).getValueByString(e);return!r.isNull()&&!r.isError()},l.prototype.isExistMotionSoundFile=function(e,r){var o=this._jsonValue.at(t.FrequestNode_Motions).getValueByString(e).getValueByIndex(r).getValueByString("Sound");return!o.isNull()&&!o.isError()},l.prototype.isExistMotionFadeIn=function(e,r){var o=this._jsonValue.at(t.FrequestNode_Motions).getValueByString(e).getValueByIndex(r).getValueByString("FadeInTime");return!o.isNull()&&!o.isError()},l.prototype.isExistMotionFadeOut=function(e,r){var o=this._jsonValue.at(t.FrequestNode_Motions).getValueByString(e).getValueByIndex(r).getValueByString("FadeOutTime");return!o.isNull()&&!o.isError()},l.prototype.isExistUserDataFile=function(){var e=this._json.getRoot().getValueByString(r).getValueByString("UserData");return!e.isNull()&&!e.isError()},l.prototype.isExistEyeBlinkParameters=function(){if(this._jsonValue.at(t.FrequestNode_Groups).isNull()||this._jsonValue.at(t.FrequestNode_Groups).isError())return!1;for(var e=0;e<this._jsonValue.at(t.FrequestNode_Groups).getSize();++e)if("EyeBlink"==this._jsonValue.at(t.FrequestNode_Groups).getValueByIndex(e).getValueByString(F).getRawString())return!0;return!1},l.prototype.isExistLipSyncParameters=function(){if(this._jsonValue.at(t.FrequestNode_Groups).isNull()||this._jsonValue.at(t.FrequestNode_Groups).isError())return!1;for(var e=0;e<this._jsonValue.at(t.FrequestNode_Groups).getSize();++e)if("LipSync"==this._jsonValue.at(t.FrequestNode_Groups).getValueByIndex(e).getValueByString(F).getRawString())return!0;return!1},l}(l);e.CubismModelSettingJson=c}(e||(exports.Live2DCubismFramework=e={}));
},{"./live2dcubismframework":"0unu","./icubismmodelsetting":"2uOW","./utils/cubismjson":"vr2H","./type/csmvector":"UWg4"}],"/4HT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,e=require("./cubismmatrix44"),r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),i=e.Live2DCubismFramework.CubismMatrix44;exports.Live2DCubismFramework=t,function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._screenLeft=0,e._screenRight=0,e._screenTop=0,e._screenBottom=0,e._maxLeft=0,e._maxRight=0,e._maxTop=0,e._maxBottom=0,e._maxScale=0,e._minScale=0,e}return r(e,t),e.prototype.adjustTranslate=function(t,e){this._tr[0]*this._maxLeft+(this._tr[12]+t)>this._screenLeft&&(t=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+t)<this._screenRight&&(t=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+e)<this._screenTop&&(e=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+e)>this._screenBottom&&(e=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);var r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]);i.multiply(r,this._tr,this._tr)},e.prototype.adjustScale=function(t,e,r){var o=this.getMaxScale(),s=this.getMinScale(),n=r*this._tr[0];n<s?this._tr[0]>0&&(r=s/this._tr[0]):n>o&&this._tr[0]>0&&(r=o/this._tr[0]);var h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]),_=new Float32Array([r,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]),a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-t,-e,0,1]);i.multiply(a,this._tr,this._tr),i.multiply(_,this._tr,this._tr),i.multiply(h,this._tr,this._tr)},e.prototype.setScreenRect=function(t,e,r,i){this._screenLeft=t,this._screenRight=e,this._screenBottom=r,this._screenTop=i},e.prototype.setMaxScreenRect=function(t,e,r,i){this._maxLeft=t,this._maxRight=e,this._maxTop=i,this._maxBottom=r},e.prototype.setMaxScale=function(t){this._maxScale=t},e.prototype.setMinScale=function(t){this._minScale=t},e.prototype.getMaxScale=function(){return this._maxScale},e.prototype.getMinScale=function(){return this._minScale},e.prototype.isMaxScale=function(){return this.getScaleX()>=this._maxScale},e.prototype.isMinScale=function(){return this.getScaleX()<=this._minScale},e.prototype.getScreenLeft=function(){return this._screenLeft},e.prototype.getScreenRight=function(){return this._screenRight},e.prototype.getScreenBottom=function(){return this._screenBottom},e.prototype.getScreenTop=function(){return this._screenTop},e.prototype.getMaxLeft=function(){return this._maxLeft},e.prototype.getMaxRight=function(){return this._maxRight},e.prototype.getMaxBottom=function(){return this._maxBottom},e.prototype.getMaxTop=function(){return this._maxTop},e}(i);t.CubismViewMatrix=e}(t||(exports.Live2DCubismFramework=t={}));
},{"./cubismmatrix44":"pAzm"}],"6EdT":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function u(e){try{c(n.next(e))}catch(t){a(t)}}function i(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,i)}c((n=n.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var r,n,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,n=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(i){a=[6,i],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function r(){}return r.loadAsArrayBufferAsync=function(r){return e(this,void 0,Promise,function(){var e;return t(this,function(t){switch(t.label){case 0:return[4,fetch(r).catch(function(e){throw new Error("Network error: "+e)})];case 1:if(!(e=t.sent()).ok)throw new Error('Failed to get "'+r+'".');return[4,e.arrayBuffer().catch(function(){throw new Error('Failed to load "'+r+'" as ArrayBuffer.')})];case 2:return[2,t.sent()]}})})},r}();exports.default=r;
},{}],"LuNH":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0,exports.Live2DCubismFramework=t,function(t){var i=function(){function t(t,i){this.x=t,this.y=i,this.x=null==t?0:t,this.y=null==i?0:i}return t.prototype.add=function(i){var r=new t(0,0);return r.x=this.x+i.x,r.y=this.y+i.y,r},t.prototype.substract=function(i){var r=new t(0,0);return r.x=this.x-i.x,r.y=this.y-i.y,r},t.prototype.multiply=function(i){var r=new t(0,0);return r.x=this.x*i.x,r.y=this.y*i.y,r},t.prototype.multiplyByScaler=function(i){return this.multiply(new t(i,i))},t.prototype.division=function(i){var r=new t(0,0);return r.x=this.x/i.x,r.y=this.y/i.y,r},t.prototype.divisionByScalar=function(i){return this.division(new t(i,i))},t.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.getDistanceWith=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.normalize=function(){var t=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/t,this.y=this.y/t},t.prototype.isEqual=function(t){return this.x==t.x&&this.y==t.y},t.prototype.isNotEqual=function(t){return!this.isEqual(t)},t}();t.CubismVector2=i}(t||(exports.Live2DCubismFramework=t={}));
},{}],"mMyx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var r,t=require("./cubismvector2"),n=t.Live2DCubismFramework.CubismVector2;exports.Live2DCubismFramework=r,function(r){var t=function(){function r(){}return r.range=function(r,t,n){return r<t?r=t:r>n&&(r=n),r},r.sin=function(r){return Math.sin(r)},r.cos=function(r){return Math.cos(r)},r.abs=function(r){return Math.abs(r)},r.sqrt=function(r){return Math.sqrt(r)},r.getEasingSine=function(r){return r<0?0:r>1?1:.5-.5*this.cos(r*Math.PI)},r.max=function(r,t){return r>t?r:t},r.min=function(r,t){return r>t?t:r},r.degreesToRadian=function(r){return r/180*Math.PI},r.radianToDegrees=function(r){return 180*r/Math.PI},r.directionToRadian=function(r,t){for(var n=Math.atan2(t.y,t.x)-Math.atan2(r.y,r.x);n<-Math.PI;)n+=2*Math.PI;for(;n>Math.PI;)n-=2*Math.PI;return n},r.directionToDegrees=function(r,t){var n=this.directionToRadian(r,t),e=this.radianToDegrees(n);return t.x-r.x>0&&(e=-e),e},r.radianToDirection=function(r){var t=new n;return t.x=this.sin(r),t.y=this.cos(r),t},r}();r.CubismMath=t}(r||(exports.Live2DCubismFramework=r={}));
},{"./cubismvector2":"LuNH"}],"umVT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,t=require("../math/cubismmath"),i=require("../type/csmvector"),n=require("../utils/cubismdebug"),s=i.Live2DCubismFramework.csmVector,o=t.Live2DCubismFramework.CubismMath;exports.Live2DCubismFramework=e,function(e){var t=function(){function e(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new s}return e.delete=function(e){e.release(),e=void 0,e=null},e.prototype.release=function(){this._weight=0},e.prototype.updateParameters=function(e,t,i){if(t.isAvailable()&&!t.isFinished()){if(!t.isStarted()){t.setIsStarted(!0),t.setStartTime(i-this._offsetSeconds),t.setFadeInStartTime(i);var s=this.getDuration();t.getEndTime()<0&&t.setEndTime(s<=0?-1:t.getStartTime()+s)}var r=this._weight;r=r*(0==this._fadeInSeconds?1:o.getEasingSine((i-t.getFadeInStartTime())/this._fadeInSeconds))*(0==this._fadeOutSeconds||t.getEndTime()<0?1:o.getEasingSine((t.getEndTime()-i)/this._fadeOutSeconds)),t.setState(i,r),(0,n.CSM_ASSERT)(0<=r&&r<=1),this.doUpdateParameters(e,i,r,t),t.getEndTime()>0&&t.getEndTime()<i&&t.setIsFinished(!0)}},e.prototype.setFadeInTime=function(e){this._fadeInSeconds=e},e.prototype.setFadeOutTime=function(e){this._fadeOutSeconds=e},e.prototype.getFadeOutTime=function(){return this._fadeOutSeconds},e.prototype.getFadeInTime=function(){return this._fadeInSeconds},e.prototype.setWeight=function(e){this._weight=e},e.prototype.getWeight=function(){return this._weight},e.prototype.getDuration=function(){return-1},e.prototype.getLoopDuration=function(){return-1},e.prototype.setOffsetTime=function(e){this._offsetSeconds=e},e.prototype.getFiredEvent=function(e,t){return this._firedEventValues},e}();e.ACubismMotion=t}(e||(exports.Live2DCubismFramework=e={}));
},{"../math/cubismmath":"mMyx","../type/csmvector":"UWg4","../utils/cubismdebug":"NrMG"}],"YFfK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,e=require("./acubismmotion"),i=e.Live2DCubismFramework.ACubismMotion;exports.Live2DCubismFramework=t,function(t){var e=function(){function t(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this}return t.prototype.release=function(){this._autoDelete&&this._motion&&i.delete(this._motion)},t.prototype.startFadeout=function(t,e){var i=e+t;(this._endTimeSeconds<0||i<this._endTimeSeconds)&&(this._endTimeSeconds=i)},t.prototype.isFinished=function(){return this._finished},t.prototype.isStarted=function(){return this._started},t.prototype.getStartTime=function(){return this._startTimeSeconds},t.prototype.getFadeInStartTime=function(){return this._fadeInStartTimeSeconds},t.prototype.getEndTime=function(){return this._endTimeSeconds},t.prototype.setStartTime=function(t){this._startTimeSeconds=t},t.prototype.setFadeInStartTime=function(t){this._fadeInStartTimeSeconds=t},t.prototype.setEndTime=function(t){this._endTimeSeconds=t},t.prototype.setIsFinished=function(t){this._finished=t},t.prototype.setIsStarted=function(t){this._started=t},t.prototype.isAvailable=function(){return this._available},t.prototype.setIsAvailable=function(t){this._available=t},t.prototype.setState=function(t,e){this._stateTimeSeconds=t,this._stateWeight=e},t.prototype.getStateTime=function(){return this._stateTimeSeconds},t.prototype.getStateWeight=function(){return this._stateWeight},t.prototype.getLastCheckEventTime=function(){return this._lastEventCheckSeconds},t.prototype.setLastCheckEventTime=function(t){this._lastEventCheckSeconds=t},t}();t.CubismMotionQueueEntry=e}(t||(exports.Live2DCubismFramework=t={}));
},{"./acubismmotion":"umVT"}],"weti":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,e=require("./cubismmotionqueueentry"),i=require("../type/csmvector"),n=i.Live2DCubismFramework.csmVector,o=e.Live2DCubismFramework.CubismMotionQueueEntry;exports.Live2DCubismFramework=t,function(t){var e=function(){function e(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new n}return e.prototype.release=function(){for(var t=0;t<this._motions.getSize();++t)this._motions.at(t)&&(this._motions.at(t).release(),this._motions.set(t,void 0),this._motions.set(t,null));this._motions=null},e.prototype.startMotion=function(e,i,n){if(null==e)return t.InvalidMotionQueueEntryHandleValue;for(var s=null,r=0;r<this._motions.getSize();++r)null!=(s=this._motions.at(r))&&s.startFadeout(s._motion.getFadeOutTime(),n);return(s=new o)._autoDelete=i,s._motion=e,this._motions.pushBack(s),s._motionQueueEntryHandle},e.prototype.isFinished=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();if(null!=e)if(null!=e._motion){if(!e.isFinished())return!1;t.preIncrement()}else e.release(),e=void 0,e=null,t=this._motions.erase(t);else t=this._motions.erase(t)}return!0},e.prototype.isFinishedByHandle=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.increment()){var i=e.ptr();if(null!=i&&(i._motionQueueEntryHandle==t&&!i.isFinished()))return!1}return!0},e.prototype.stopAllMotions=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();null!=e?(e.release(),e=void 0,e=null,t=this._motions.erase(t)):t=this._motions.erase(t)}},e.prototype.getCubismMotionQueueEntry=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.preIncrement()){var i=e.ptr();if(null!=i&&i._motionQueueEntryHandle==t)return i}return null},e.prototype.setEventCallback=function(t,e){void 0===e&&(e=null),this._eventCallBack=t,this._eventCustomData=e},e.prototype.doUpdateMotion=function(t,e){for(var i=!1,n=this._motions.begin();n.notEqual(this._motions.end());){var o=n.ptr();if(null!=o){var s=o._motion;if(null!=s){s.updateParameters(t,o,e),i=!0;for(var r=s.getFiredEvent(o.getLastCheckEventTime()-o.getStartTime(),e-o.getStartTime()),u=0;u<r.getSize();++u)this._eventCallBack(this,r.at(u),this._eventCustomData);o.setLastCheckEventTime(e),o.isFinished()?(o.release(),o=void 0,o=null,n=this._motions.erase(n)):n.preIncrement()}else o.release(),o=void 0,o=null,n=this._motions.erase(n)}else n=this._motions.erase(n)}return i},e}();t.CubismMotionQueueManager=e,t.InvalidMotionQueueEntryHandleValue=-1}(t||(exports.Live2DCubismFramework=t={}));
},{"./cubismmotionqueueentry":"YFfK","../type/csmvector":"UWg4"}],"nrbt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var r,t=require("./cubismmotionqueuemanager"),e=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),i=t.Live2DCubismFramework.CubismMotionQueueManager;exports.Live2DCubismFramework=r,function(r){var t=function(r){function t(){var t=r.call(this)||this;return t._currentPriority=0,t._reservePriority=0,t}return e(t,r),t.prototype.getCurrentPriority=function(){return this._currentPriority},t.prototype.getReservePriority=function(){return this._reservePriority},t.prototype.setReservePriority=function(r){this._reservePriority=r},t.prototype.startMotionPriority=function(t,e,i){return i==this._reservePriority&&(this._reservePriority=0),this._currentPriority=i,r.prototype.startMotion.call(this,t,e,this._userTimeSeconds)},t.prototype.updateMotion=function(t,e){this._userTimeSeconds+=e;var i=r.prototype.doUpdateMotion.call(this,t,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),i},t.prototype.reserveMotion=function(r){return!(r<=this._reservePriority||r<=this._currentPriority)&&(this._reservePriority=r,!0)},t}(i);r.CubismMotionManager=t}(r||(exports.Live2DCubismFramework=r={}));
},{"./cubismmotionqueuemanager":"weti"}],"2JLv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,t=require("./cubismmath"),s=t.Live2DCubismFramework.CubismMath;exports.Live2DCubismFramework=e,function(e){var t=function(){function e(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}return e.prototype.update=function(e){this._userTimeSeconds+=e;if(0!=this._lastTimeSeconds){var t=30*(this._userTimeSeconds-this._lastTimeSeconds);this._lastTimeSeconds=this._userTimeSeconds;var i=t*(4/30)/4.5,a=this._faceTargetX-this._faceX,r=this._faceTargetY-this._faceY;if(!(s.abs(a)<=.01&&s.abs(r)<=.01)){var c=s.sqrt(a*a+r*r),h=4/30*r/c,_=4/30*a/c-this._faceVX,f=h-this._faceVY,o=s.sqrt(_*_+f*f);(o<-i||o>i)&&(_*=i/o,f*=i/o),this._faceVX+=_,this._faceVY+=f;var n=.5*(s.sqrt(i*i+16*i*c-8*i*c)-i),u=s.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);u>n&&(this._faceVX*=n/u,this._faceVY*=n/u),this._faceX+=this._faceVX,this._faceY+=this._faceVY}}else this._lastTimeSeconds=this._userTimeSeconds},e.prototype.getX=function(){return this._faceX},e.prototype.getY=function(){return this._faceY},e.prototype.set=function(e,t){this._faceTargetX=e,this._faceTargetY=t},e}();e.CubismTargetPoint=t}(e||(exports.Live2DCubismFramework=e={}));
},{"./cubismmath":"mMyx"}],"lHRd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,e=require("./cubismmatrix44"),i=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),o=e.Live2DCubismFramework.CubismMatrix44;exports.Live2DCubismFramework=t,function(t){var e=function(t){function e(e,i){var o=t.call(this)||this;return o._width=void 0!==e?e:0,o._height=void 0!==i?i:0,o._width>o._height?o.setWidth(o._height/o._width):o.setHeight(1),o}return i(e,t),e.prototype.setWidth=function(t){var e=t/this._width,i=e;this.scale(e,i)},e.prototype.setHeight=function(t){var e=t/this._height,i=e;this.scale(e,i)},e.prototype.setPosition=function(t,e){this.translate(t,e)},e.prototype.setCenterPosition=function(t,e){this.centerX(t),this.centerY(e)},e.prototype.top=function(t){this.setY(t)},e.prototype.bottom=function(t){var e=this._height*this.getScaleY();this.translateY(t-e)},e.prototype.left=function(t){this.setX(t)},e.prototype.right=function(t){var e=this._width*this.getScaleX();this.translateX(t-e)},e.prototype.centerX=function(t){var e=this._width*this.getScaleX();this.translateX(t-e/2)},e.prototype.setX=function(t){this.translateX(t)},e.prototype.centerY=function(t){var e=this._height*this.getScaleY();this.translateY(t-e/2)},e.prototype.setY=function(t){this.translateY(t)},e.prototype.setupFromLayout=function(t){for(var e=t.begin();e.notEqual(t.end());e.preIncrement()){var i=e.ptr().first,o=e.ptr().second;"width"==i?this.setWidth(o):"height"==i&&this.setHeight(o)}for(e=t.begin();e.notEqual(t.end());e.preIncrement()){i=e.ptr().first,o=e.ptr().second;"x"==i?this.setX(o):"y"==i?this.setY(o):"center_x"==i?this.centerX(o):"center_y"==i?this.centerY(o):"top"==i?this.top(o):"bottom"==i?this.bottom(o):"left"==i?this.left(o):"right"==i&&this.right(o)}},e}(o);t.CubismModelMatrix=e}(t||(exports.Live2DCubismFramework=t={}));
},{"./cubismmatrix44":"pAzm"}],"kQ5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,t=require("../rendering/cubismrenderer"),a=require("../live2dcubismframework"),r=require("../type/csmmap"),i=require("../type/csmvector"),s=require("../utils/cubismdebug"),o=a.Live2DCubismFramework.CubismFramework,n=t.Live2DCubismFramework.CubismBlendMode,u=i.Live2DCubismFramework.csmVector,l=r.Live2DCubismFramework.csmMap;exports.Live2DCubismFramework=e,function(e){var t=function(){function e(e){this._model=e,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new u,this._parameterIds=new u,this._drawableIds=new u,this._partIds=new u,this._notExistPartId=new l,this._notExistParameterId=new l,this._notExistParameterValues=new l,this._notExistPartOpacities=new l}return e.prototype.update=function(){this._model.update(),this._model.drawables.resetDynamicFlags()},e.prototype.getCanvasWidth=function(){return null==this._model?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit},e.prototype.getCanvasHeight=function(){return null==this._model?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit},e.prototype.saveParameters=function(){for(var e=this._model.parameters.count,t=this._savedParameters.getSize(),a=0;a<e;++a)a<t?this._savedParameters.set(a,this._parameterValues[a]):this._savedParameters.pushBack(this._parameterValues[a])},e.prototype.getModel=function(){return this._model},e.prototype.getPartIndex=function(e){var t,a=this._model.parts.count;for(t=0;t<a;++t)if(e==this._partIds.at(t))return t;return this._notExistPartId.isExist(e)?this._notExistPartId.getValue(e):(t=a+this._notExistPartId.getSize(),this._notExistPartId.setValue(e,t),this._notExistPartOpacities.appendKey(t),t)},e.prototype.getPartCount=function(){return this._model.parts.count},e.prototype.setPartOpacityByIndex=function(e,t){this._notExistPartOpacities.isExist(e)?this._notExistPartOpacities.setValue(e,t):((0,s.CSM_ASSERT)(0<=e&&e<this.getPartCount()),this._partOpacities[e]=t)},e.prototype.setPartOpacityById=function(e,t){var a=this.getPartIndex(e);a<0||this.setPartOpacityByIndex(a,t)},e.prototype.getPartOpacityByIndex=function(e){return this._notExistPartOpacities.isExist(e)?this._notExistPartOpacities.getValue(e):((0,s.CSM_ASSERT)(0<=e&&e<this.getPartCount()),this._partOpacities[e])},e.prototype.getPartOpacityById=function(e){var t=this.getPartIndex(e);return t<0?0:this.getPartOpacityByIndex(t)},e.prototype.getParameterIndex=function(e){var t,a=this._model.parameters.count;for(t=0;t<a;++t)if(e==this._parameterIds.at(t))return t;return this._notExistParameterId.isExist(e)?this._notExistParameterId.getValue(e):(t=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(e,t),this._notExistParameterValues.appendKey(t),t)},e.prototype.getParameterCount=function(){return this._model.parameters.count},e.prototype.getParameterMaximumValue=function(e){return this._model.parameters.maximumValues[e]},e.prototype.getParameterMinimumValue=function(e){return this._model.parameters.minimumValues[e]},e.prototype.getParameterDefaultValue=function(e){return this._model.parameters.defaultValues[e]},e.prototype.getParameterValueByIndex=function(e){return this._notExistParameterValues.isExist(e)?this._notExistParameterValues.getValue(e):((0,s.CSM_ASSERT)(0<=e&&e<this.getParameterCount()),this._parameterValues[e])},e.prototype.getParameterValueById=function(e){var t=this.getParameterIndex(e);return this.getParameterValueByIndex(t)},e.prototype.setParameterValueByIndex=function(e,t,a){void 0===a&&(a=1),this._notExistParameterValues.isExist(e)?this._notExistParameterValues.setValue(e,1==a?t:this._notExistParameterValues.getValue(e)*(1-a)+t*a):((0,s.CSM_ASSERT)(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<t&&(t=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>t&&(t=this._model.parameters.minimumValues[e]),this._parameterValues[e]=1==a?t:this._parameterValues[e]=this._parameterValues[e]*(1-a)+t*a)},e.prototype.setParameterValueById=function(e,t,a){void 0===a&&(a=1);var r=this.getParameterIndex(e);this.setParameterValueByIndex(r,t,a)},e.prototype.addParameterValueByIndex=function(e,t,a){void 0===a&&(a=1),this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+t*a)},e.prototype.addParameterValueById=function(e,t,a){void 0===a&&(a=1);var r=this.getParameterIndex(e);this.addParameterValueByIndex(r,t,a)},e.prototype.multiplyParameterValueById=function(e,t,a){void 0===a&&(a=1);var r=this.getParameterIndex(e);this.multiplyParameterValueByIndex(r,t,a)},e.prototype.multiplyParameterValueByIndex=function(e,t,a){void 0===a&&(a=1),this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(t-1)*a))},e.prototype.getDrawableIndex=function(e){for(var t=this._model.drawables.count,a=0;a<t;++a)if(this._drawableIds.at(a)==e)return a;return-1},e.prototype.getDrawableCount=function(){return this._model.drawables.count},e.prototype.getDrawableId=function(e){var t=this._model.drawables.ids;return o.getIdManager().getId(t[e])},e.prototype.getDrawableRenderOrders=function(){return this._model.drawables.renderOrders},e.prototype.getDrawableTextureIndices=function(e){return this._model.drawables.textureIndices[e]},e.prototype.getDrawableDynamicFlagVertexPositionsDidChange=function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(t[e])},e.prototype.getDrawableVertexIndexCount=function(e){return this._model.drawables.indexCounts[e]},e.prototype.getDrawableVertexCount=function(e){return this._model.drawables.vertexCounts[e]},e.prototype.getDrawableVertices=function(e){return this.getDrawableVertexPositions(e)},e.prototype.getDrawableVertexIndices=function(e){return this._model.drawables.indices[e]},e.prototype.getDrawableVertexPositions=function(e){return this._model.drawables.vertexPositions[e]},e.prototype.getDrawableVertexUvs=function(e){return this._model.drawables.vertexUvs[e]},e.prototype.getDrawableOpacity=function(e){return this._model.drawables.opacities[e]},e.prototype.getDrawableCulling=function(e){var t=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(t[e])},e.prototype.getDrawableBlendMode=function(e){var t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(t[e])?n.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(t[e])?n.CubismBlendMode_Multiplicative:n.CubismBlendMode_Normal},e.prototype.getDrawableMasks=function(){return this._model.drawables.masks},e.prototype.getDrawableMaskCounts=function(){return this._model.drawables.maskCounts},e.prototype.isUsingMasking=function(){for(var e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1},e.prototype.getDrawableDynamicFlagIsVisible=function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(t[e])},e.prototype.getDrawableDynamicFlagVisibilityDidChange=function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(t[e])},e.prototype.getDrawableDynamicFlagOpacityDidChange=function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(t[e])},e.prototype.getDrawableDynamicFlagRenderOrderDidChange=function(e){var t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(t[e])},e.prototype.loadParameters=function(){var e=this._model.parameters.count,t=this._savedParameters.getSize();e>t&&(e=t);for(var a=0;a<e;++a)this._parameterValues[a]=this._savedParameters.at(a)},e.prototype.initialize=function(){(0,s.CSM_ASSERT)(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;var e=this._model.parameters.ids,t=this._model.parameters.count;this._parameterIds.prepareCapacity(t);for(var a=0;a<t;++a)this._parameterIds.pushBack(o.getIdManager().getId(e[a]));var r=this._model.parts.ids,i=this._model.parts.count;this._partIds.prepareCapacity(i);for(a=0;a<i;++a)this._partIds.pushBack(o.getIdManager().getId(r[a]));var n=this._model.drawables.ids,u=this._model.drawables.count;this._drawableIds.prepareCapacity(u);for(a=0;a<u;++a)this._drawableIds.pushBack(o.getIdManager().getId(n[a]))},e.prototype.release=function(){this._model.release(),this._model=null},e}();e.CubismModel=t}(e||(exports.Live2DCubismFramework=e={}));
},{"../rendering/cubismrenderer":"ttDA","../live2dcubismframework":"0unu","../type/csmmap":"MeuK","../type/csmvector":"UWg4","../utils/cubismdebug":"NrMG"}],"OSDL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,o=require("./cubismmodel"),r=require("../utils/cubismdebug"),t=o.Live2DCubismFramework.CubismModel;exports.Live2DCubismFramework=e,function(e){var o=function(){function e(e){this._moc=e,this._modelCount=0}return e.create=function(o){var r=null,t=Live2DCubismCore.Moc.fromArrayBuffer(o);return t&&(r=new e(t)),r},e.delete=function(e){e._moc._release(),e._moc=null,e=null},e.prototype.createModel=function(){var e=null,o=Live2DCubismCore.Model.fromMoc(this._moc);return o&&((e=new t(o)).initialize(),++this._modelCount),e},e.prototype.deleteModel=function(e){null!=e&&(e.release(),e=null,--this._modelCount)},e.prototype.release=function(){(0,r.CSM_ASSERT)(0==this._modelCount),this._moc._release(),this._moc=null},e}();e.CubismMoc=o}(e||(exports.Live2DCubismFramework=e={}));
},{"./cubismmodel":"kQ5X","../utils/cubismdebug":"NrMG"}],"RTTN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,e=require("../utils/cubismjson"),o=require("../live2dcubismframework"),n=require("../type/csmstring"),i=n.Live2DCubismFramework.csmString,r=o.Live2DCubismFramework.CubismFramework,u=e.Live2DCubismFramework.CubismJson;exports.Live2DCubismFramework=t,function(t){var e="Meta",o=function(){function t(t,e){this._json=u.create(t,e)}return t.prototype.release=function(){u.delete(this._json)},t.prototype.getMotionDuration=function(){return this._json.getRoot().getValueByString(e).getValueByString("Duration").toFloat()},t.prototype.isMotionLoop=function(){return this._json.getRoot().getValueByString(e).getValueByString("Loop").toBoolean()},t.prototype.getMotionCurveCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("CurveCount").toInt()},t.prototype.getMotionFps=function(){return this._json.getRoot().getValueByString(e).getValueByString("Fps").toFloat()},t.prototype.getMotionTotalSegmentCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalSegmentCount").toInt()},t.prototype.getMotionTotalPointCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalPointCount").toInt()},t.prototype.isExistMotionFadeInTime=function(){return!this._json.getRoot().getValueByString(e).getValueByString("FadeInTime").isNull()},t.prototype.isExistMotionFadeOutTime=function(){return!this._json.getRoot().getValueByString(e).getValueByString("FadeOutTime").isNull()},t.prototype.getMotionFadeInTime=function(){return this._json.getRoot().getValueByString(e).getValueByString("FadeInTime").toFloat()},t.prototype.getMotionFadeOutTime=function(){return this._json.getRoot().getValueByString(e).getValueByString("FadeOutTime").toFloat()},t.prototype.getMotionCurveTarget=function(t){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("Target").getRawString()},t.prototype.getMotionCurveId=function(t){return r.getIdManager().getId(this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("Id").getRawString())},t.prototype.isExistMotionCurveFadeInTime=function(t){return!this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("FadeInTime").isNull()},t.prototype.isExistMotionCurveFadeOutTime=function(t){return!this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("FadeOutTime").isNull()},t.prototype.getMotionCurveFadeInTime=function(t){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("FadeInTime").toFloat()},t.prototype.getMotionCurveFadeOutTime=function(t){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("FadeOutTime").toFloat()},t.prototype.getMotionCurveSegmentCount=function(t){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("Segments").getVector().getSize()},t.prototype.getMotionCurveSegment=function(t,e){return this._json.getRoot().getValueByString("Curves").getValueByIndex(t).getValueByString("Segments").getValueByIndex(e).toFloat()},t.prototype.getEventCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("UserDataCount").toInt()},t.prototype.getTotalEventValueSize=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalUserDataSize").toInt()},t.prototype.getEventTime=function(t){return this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Time").toInt()},t.prototype.getEventValue=function(t){return new i(this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Value").getRawString())},t}();t.CubismMotionJson=o}(t||(exports.Live2DCubismFramework=t={}));
},{"../utils/cubismjson":"vr2H","../live2dcubismframework":"0unu","../type/csmstring":"qV/H"}],"5Lha":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,t=require("../type/csmvector"),i=t.Live2DCubismFramework.csmVector;exports.Live2DCubismFramework=e,function(e){var t;!function(e){e[e.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",e[e.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",e[e.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity"}(t=e.CubismMotionCurveTarget||(e.CubismMotionCurveTarget={})),function(e){e[e.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",e[e.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",e[e.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",e[e.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped"}(e.CubismMotionSegmentType||(e.CubismMotionSegmentType={}));var n=function(){return function(){this.time=0,this.value=0}}();e.CubismMotionPoint=n;var o=function(){return function(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0}}();e.CubismMotionSegment=o;var r=function(){return function(){this.type=t.CubismMotionCurveTarget_Model,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}();e.CubismMotionCurve=r;var u=function(){return function(){this.fireTime=0}}();e.CubismMotionEvent=u;var s=function(){return function(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new i,this.segments=new i,this.points=new i,this.events=new i}}();e.CubismMotionData=s}(e||(exports.Live2DCubismFramework=e={}));
},{"../type/csmvector":"UWg4"}],"+zLe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,e=require("./cubismmotionjson"),i=require("./cubismmotioninternal"),o=require("./acubismmotion"),a=require("../live2dcubismframework"),n=require("../math/cubismmath"),r=require("../type/csmstring"),s=require("../utils/cubismdebug"),m=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),u=r.Live2DCubismFramework.csmString,d=i.Live2DCubismFramework.CubismMotionData,v=i.Live2DCubismFramework.CubismMotionSegment,_=i.Live2DCubismFramework.CubismMotionPoint,g=i.Live2DCubismFramework.CubismMotionEvent,p=i.Live2DCubismFramework.CubismMotionSegmentType,h=i.Live2DCubismFramework.CubismMotionCurve,c=i.Live2DCubismFramework.CubismMotionCurveTarget,l=n.Live2DCubismFramework.CubismMath,C=a.Live2DCubismFramework.CubismFramework,f=o.Live2DCubismFramework.ACubismMotion,D=e.Live2DCubismFramework.CubismMotionJson;exports.Live2DCubismFramework=t,function(t){function e(t,e,i){var o=new _;return o.time=t.time+(e.time-t.time)*i,o.value=t.value+(e.value-t.value)*i,o}function i(t,e){var i=(e-t[0].time)/(t[1].time-t[0].time);return i<0&&(i=0),t[0].value+(t[1].value-t[0].value)*i}function o(t,i){var o=(i-t[0].time)/(t[3].time-t[0].time);o<0&&(o=0);var a=e(t[0],t[1],o),n=e(t[1],t[2],o),r=e(t[2],t[3],o),s=e(a,n,o),m=e(n,r,o);return e(s,m,o).value}function a(t,e){return t[0].value}function n(t,e){return t[1].value}function r(t,e,i){for(var o=t.curves.at(e),a=-1,n=o.baseSegmentIndex+o.segmentCount,r=0,s=o.baseSegmentIndex;s<n;++s)if(r=t.segments.at(s).basePointIndex+(t.segments.at(s).segmentType==p.CubismMotionSegmentType_Bezier?3:1),t.points.at(r).time>i){a=s;break}if(-1==a)return t.points.at(r).value;var m=t.segments.at(a);return m.evaluate(t.points.get(m.basePointIndex),i)}var S=function(t){function e(){var e=t.call(this)||this;return e._sourceFrameRate=30,e._loopDurationSeconds=-1,e._isLoop=!1,e._isLoopFadeIn=!0,e._lastWeight=0,e._motionData=null,e._modelCurveIdEyeBlink=null,e._modelCurveIdLipSync=null,e._eyeBlinkParameterIds=null,e._lipSyncParameterIds=null,e}return m(e,t),e.create=function(t,i){var o=new e;return o.parse(t,i),o._sourceFrameRate=o._motionData.fps,o._loopDurationSeconds=o._motionData.duration,o},e.prototype.doUpdateParameters=function(t,e,i,o){null==this._modelCurveIdEyeBlink&&(this._modelCurveIdEyeBlink=C.getIdManager().getId("EyeBlink")),null==this._modelCurveIdLipSync&&(this._modelCurveIdLipSync=C.getIdManager().getId("LipSync"));var a=e-o.getStartTime();a<0&&(a=0);var n=Number.MAX_VALUE,m=Number.MAX_VALUE,u=0,d=0;this._eyeBlinkParameterIds.getSize()>64&&(0,s.CubismLogDebug)("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>64&&(0,s.CubismLogDebug)("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());var v,_,g,p=this._fadeInSeconds<=0?1:l.getEasingSine((e-o.getFadeInStartTime())/this._fadeInSeconds),h=this._fadeOutSeconds<=0||o.getEndTime()<0?1:l.getEasingSine((o.getEndTime()-e)/this._fadeOutSeconds),f=a;if(this._isLoop)for(;f>this._motionData.duration;)f-=this._motionData.duration;var D=this._motionData.curves;for(_=0;_<this._motionData.curveCount&&D.at(_).type==c.CubismMotionCurveTarget_Model;++_)v=r(this._motionData,_,f),D.at(_).id==this._modelCurveIdEyeBlink?m=v:D.at(_).id==this._modelCurveIdLipSync&&(n=v);for(;_<this._motionData.curveCount&&D.at(_).type==c.CubismMotionCurveTarget_Parameter;++_)if(0,-1!=(g=t.getParameterIndex(D.at(_).id))){var S=t.getParameterValueByIndex(g);if(v=r(this._motionData,_,f),m!=Number.MAX_VALUE)for(var y=0;y<this._eyeBlinkParameterIds.getSize()&&y<64;++y)if(this._eyeBlinkParameterIds.at(y)==D.at(_).id){v*=m,d|=1<<y;break}if(n!=Number.MAX_VALUE)for(y=0;y<this._lipSyncParameterIds.getSize()&&y<64;++y)if(this._lipSyncParameterIds.at(y)==D.at(_).id){v+=n,u|=1<<y;break}var I=void 0;if(D.at(_).fadeInTime<0&&D.at(_).fadeOutTime<0)I=S+(v-S)*i;else{var b=void 0,M=void 0;b=D.at(_).fadeInTime<0?p:0==D.at(_).fadeInTime?1:l.getEasingSine((e-o.getFadeInStartTime())/D.at(_).fadeInTime),M=D.at(_).fadeOutTime<0?h:0==D.at(_).fadeOutTime||o.getEndTime()<0?1:l.getEasingSine((o.getEndTime()-e)/D.at(_).fadeOutTime),I=S+(v-S)*(this._weight*b*M)}t.setParameterValueByIndex(g,I,1)}if(m!=Number.MAX_VALUE)for(y=0;y<this._eyeBlinkParameterIds.getSize()&&y<64;++y){S=t.getParameterValueById(this._eyeBlinkParameterIds.at(y));if(!(d>>y&1)){I=S+(m-S)*i;t.setParameterValueById(this._eyeBlinkParameterIds.at(y),I)}}if(n!=Number.MAX_VALUE)for(y=0;y<this._lipSyncParameterIds.getSize()&&y<64;++y){S=t.getParameterValueById(this._lipSyncParameterIds.at(y));if(!(u>>y&1)){I=S+(n-S)*i;t.setParameterValueById(this._lipSyncParameterIds.at(y),I)}}for(;_<this._motionData.curveCount&&D.at(_).type==c.CubismMotionCurveTarget_PartOpacity;++_)-1!=(g=t.getParameterIndex(D.at(_).id))&&(v=r(this._motionData,_,f),t.setParameterValueByIndex(g,v));a>=this._motionData.duration&&(this._isLoop?(o.setStartTime(e),this._isLoopFadeIn&&o.setFadeInStartTime(e)):o.setIsFinished(!0)),this._lastWeight=i},e.prototype.setIsLoop=function(t){this._isLoop=t},e.prototype.isLoop=function(){return this._isLoop},e.prototype.setIsLoopFadeIn=function(t){this._isLoopFadeIn=t},e.prototype.isLoopFadeIn=function(){return this._isLoopFadeIn},e.prototype.getDuration=function(){return this._isLoop?-1:this._loopDurationSeconds},e.prototype.getLoopDuration=function(){return this._loopDurationSeconds},e.prototype.setParameterFadeInTime=function(t,e){for(var i=this._motionData.curves,o=0;o<this._motionData.curveCount;++o)if(t==i.at(o).id)return void(i.at(o).fadeInTime=e)},e.prototype.setParameterFadeOutTime=function(t,e){for(var i=this._motionData.curves,o=0;o<this._motionData.curveCount;++o)if(t==i.at(o).id)return void(i.at(o).fadeOutTime=e)},e.prototype.getParameterFadeInTime=function(t){for(var e=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(t==e.at(i).id)return e.at(i).fadeInTime;return-1},e.prototype.getParameterFadeOutTime=function(t){for(var e=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(t==e.at(i).id)return e.at(i).fadeOutTime;return-1},e.prototype.setEffectIds=function(t,e){this._eyeBlinkParameterIds=t,this._lipSyncParameterIds=e},e.prototype.release=function(){this._motionData=void 0,this._motionData=null},e.prototype.parse=function(t,e){this._motionData=new d;var r=new D(t,e);this._motionData.duration=r.getMotionDuration(),this._motionData.loop=r.isMotionLoop(),this._motionData.curveCount=r.getMotionCurveCount(),this._motionData.fps=r.getMotionFps(),this._motionData.eventCount=r.getEventCount(),r.isExistMotionFadeInTime()?this._fadeInSeconds=r.getMotionFadeInTime()<0?1:r.getMotionFadeInTime():this._fadeInSeconds=1,r.isExistMotionFadeOutTime()?this._fadeOutSeconds=r.getMotionFadeOutTime()<0?1:r.getMotionFadeOutTime():this._fadeOutSeconds=1,this._motionData.curves.updateSize(this._motionData.curveCount,h,!0),this._motionData.segments.updateSize(r.getMotionTotalSegmentCount(),v,!0),this._motionData.points.updateSize(r.getMotionTotalPointCount(),_,!0),this._motionData.events.updateSize(this._motionData.eventCount,g,!0);for(var m=0,u=0,l=0;l<this._motionData.curveCount;++l){"Model"==r.getMotionCurveTarget(l)?this._motionData.curves.at(l).type=c.CubismMotionCurveTarget_Model:"Parameter"==r.getMotionCurveTarget(l)?this._motionData.curves.at(l).type=c.CubismMotionCurveTarget_Parameter:"PartOpacity"==r.getMotionCurveTarget(l)&&(this._motionData.curves.at(l).type=c.CubismMotionCurveTarget_PartOpacity),this._motionData.curves.at(l).id=r.getMotionCurveId(l),this._motionData.curves.at(l).baseSegmentIndex=u,this._motionData.curves.at(l).fadeInTime=r.isExistMotionCurveFadeInTime(l)?r.getMotionCurveFadeInTime(l):-1,this._motionData.curves.at(l).fadeOutTime=r.isExistMotionCurveFadeOutTime(l)?r.getMotionCurveFadeOutTime(l):-1;for(var C=0;C<r.getMotionCurveSegmentCount(l);){switch(0==C?(this._motionData.segments.at(u).basePointIndex=m,this._motionData.points.at(m).time=r.getMotionCurveSegment(l,C),this._motionData.points.at(m).value=r.getMotionCurveSegment(l,C+1),m+=1,C+=2):this._motionData.segments.at(u).basePointIndex=m-1,r.getMotionCurveSegment(l,C)){case p.CubismMotionSegmentType_Linear:this._motionData.segments.at(u).segmentType=p.CubismMotionSegmentType_Linear,this._motionData.segments.at(u).evaluate=i,this._motionData.points.at(m).time=r.getMotionCurveSegment(l,C+1),this._motionData.points.at(m).value=r.getMotionCurveSegment(l,C+2),m+=1,C+=3;break;case p.CubismMotionSegmentType_Bezier:this._motionData.segments.at(u).segmentType=p.CubismMotionSegmentType_Bezier,this._motionData.segments.at(u).evaluate=o,this._motionData.points.at(m).time=r.getMotionCurveSegment(l,C+1),this._motionData.points.at(m).value=r.getMotionCurveSegment(l,C+2),this._motionData.points.at(m+1).time=r.getMotionCurveSegment(l,C+3),this._motionData.points.at(m+1).value=r.getMotionCurveSegment(l,C+4),this._motionData.points.at(m+2).time=r.getMotionCurveSegment(l,C+5),this._motionData.points.at(m+2).value=r.getMotionCurveSegment(l,C+6),m+=3,C+=7;break;case p.CubismMotionSegmentType_Stepped:this._motionData.segments.at(u).segmentType=p.CubismMotionSegmentType_Stepped,this._motionData.segments.at(u).evaluate=a,this._motionData.points.at(m).time=r.getMotionCurveSegment(l,C+1),this._motionData.points.at(m).value=r.getMotionCurveSegment(l,C+2),m+=1,C+=3;break;case p.CubismMotionSegmentType_InverseStepped:this._motionData.segments.at(u).segmentType=p.CubismMotionSegmentType_InverseStepped,this._motionData.segments.at(u).evaluate=n,this._motionData.points.at(m).time=r.getMotionCurveSegment(l,C+1),this._motionData.points.at(m).value=r.getMotionCurveSegment(l,C+2),m+=1,C+=3;break;default:(0,s.CSM_ASSERT)(0)}++this._motionData.curves.at(l).segmentCount,++u}}for(var f=0;f<r.getEventCount();++f)this._motionData.events.at(f).fireTime=r.getEventTime(f),this._motionData.events.at(f).value=r.getEventValue(f);r.release(),r=void 0,r=null},e.prototype.getFiredEvent=function(t,e){this._firedEventValues.updateSize(0);for(var i=0;i<this._motionData.eventCount;++i)this._motionData.events.at(i).fireTime>t&&this._motionData.events.at(i).fireTime<=e&&this._firedEventValues.pushBack(new u(this._motionData.events.at(i).value.s));return this._firedEventValues},e}(f);t.CubismMotion=S}(t||(exports.Live2DCubismFramework=t={}));
},{"./cubismmotionjson":"RTTN","./cubismmotioninternal":"5Lha","./acubismmotion":"umVT","../live2dcubismframework":"0unu","../math/cubismmath":"mMyx","../type/csmstring":"qV/H","../utils/cubismdebug":"NrMG"}],"2mWK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,r=require("./acubismmotion"),t=require("../utils/cubismjson"),i=require("../live2dcubismframework"),n=require("../type/csmvector"),a=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function i(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),o=n.Live2DCubismFramework.csmVector,s=i.Live2DCubismFramework.CubismFramework,u=t.Live2DCubismFramework.CubismJson,p=r.Live2DCubismFramework.ACubismMotion;exports.Live2DCubismFramework=e,function(e){var r,t=function(e){function t(){var r=e.call(this)||this;return r._parameters=new o,r}return a(t,e),t.create=function(e,n){var a=new t,o=u.create(e,n),p=o.getRoot();a.setFadeInTime(p.getValueByString("FadeInTime").toFloat(1)),a.setFadeOutTime(p.getValueByString("FadeOutTime").toFloat(1));var l=p.getValueByString("Parameters").getSize();a._parameters.prepareCapacity(l);for(var d=0;d<l;++d){var m=p.getValueByString("Parameters").getValueByIndex(d),y=s.getIdManager().getId(m.getValueByString("Id").getRawString()),c=m.getValueByString("Value").toFloat(),g=void 0;g=m.getValueByString("Blend").isNull()||"Add"==m.getValueByString("Blend").getString()?r.ExpressionBlendType_Add:"Multiply"==m.getValueByString("Blend").getString()?r.ExpressionBlendType_Multiply:"Overwrite"==m.getValueByString("Blend").getString()?r.ExpressionBlendType_Overwrite:r.ExpressionBlendType_Add;var v=new i;v.parameterId=y,v.blendType=g,v.value=c,a._parameters.pushBack(v)}return u.delete(o),a},t.prototype.doUpdateParameters=function(e,t,i,n){for(var a=0;a<this._parameters.getSize();++a){var o=this._parameters.at(a);switch(o.blendType){case r.ExpressionBlendType_Add:e.addParameterValueById(o.parameterId,o.value,i);break;case r.ExpressionBlendType_Multiply:e.multiplyParameterValueById(o.parameterId,o.value,i);break;case r.ExpressionBlendType_Overwrite:e.setParameterValueById(o.parameterId,o.value,i)}}},t}(p);e.CubismExpressionMotion=t,function(e){e[e.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",e[e.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",e[e.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite"}(r=e.ExpressionBlendType||(e.ExpressionBlendType={}));var i=function(){return function(){}}();e.ExpressionParameter=i}(e||(exports.Live2DCubismFramework=e={}));
},{"./acubismmotion":"umVT","../utils/cubismjson":"vr2H","../live2dcubismframework":"0unu","../type/csmvector":"UWg4"}],"/yuA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,e=require("../type/csmvector"),r=require("../live2dcubismframework"),a=require("../utils/cubismjson"),i=e.Live2DCubismFramework.csmVector,n=r.Live2DCubismFramework.CubismFramework,s=a.Live2DCubismFramework.CubismJson;exports.Live2DCubismFramework=t,function(t){var e=.5,r=function(){function t(){this._fadeTimeSeconds=e,this._lastModel=null,this._partGroups=new i,this._partGroupCounts=new i}return t.create=function(r,i){var o=new t,p=s.create(r,i),u=p.getRoot();u.getValueByString("FadeInTime").isNull()||(o._fadeTimeSeconds=u.getValueByString("FadeInTime").toFloat(e),o._fadeTimeSeconds<=0&&(o._fadeTimeSeconds=e));for(var d=u.getValueByString("Groups"),l=d.getSize(),c=0;c<l;++c){for(var I=d.getValueByIndex(c),h=I.getSize(),g=0,m=0;m<h;++m){var f=I.getValueByIndex(m),v=new a,y=n.getIdManager().getId(f.getValueByString("Id").getRawString());if(v.partId=y,!f.getValueByString("Link").isNull())for(var x=f.getValueByString("Link"),k=x.getSize(),_=0;_<k;++_){var B=new a,S=n.getIdManager().getId(x.getValueByIndex(_).getString());B.partId=S,v.link.pushBack(B)}o._partGroups.pushBack(v.clone()),++g}o._partGroupCounts.pushBack(g)}return s.delete(p),o},t.delete=function(t){null!=t&&(t=null)},t.prototype.updateParameters=function(t,e){t!=this._lastModel&&this.reset(t),this._lastModel=t,e<0&&(e=0);for(var r=0,a=0;a<this._partGroupCounts.getSize();a++){var i=this._partGroupCounts.at(a);this.doFade(t,e,r,i),r+=i}this.copyPartOpacities(t)},t.prototype.reset=function(t){for(var e=0,r=0;r<this._partGroupCounts.getSize();++r){for(var a=this._partGroupCounts.at(r),i=e;i<e+a;++i){this._partGroups.at(i).initialize(t);var n=this._partGroups.at(i).partIndex,s=this._partGroups.at(i).parameterIndex;if(!(n<0)){t.setPartOpacityByIndex(n,i==e?1:0),t.setParameterValueByIndex(s,i==e?1:0);for(var o=0;o<this._partGroups.at(i).link.getSize();++o)this._partGroups.at(i).link.at(o).initialize(t)}}e+=a}},t.prototype.copyPartOpacities=function(t){for(var e=0;e<this._partGroups.getSize();++e){var r=this._partGroups.at(e);if(0!=r.link.getSize())for(var a=this._partGroups.at(e).partIndex,i=t.getPartOpacityByIndex(a),n=0;n<r.link.getSize();++n){var s=r.link.at(n).partIndex;s<0||t.setPartOpacityByIndex(s,i)}}},t.prototype.doFade=function(t,e,r,a){for(var i=-1,n=1,s=r;s<r+a;++s){var o=this._partGroups.at(s).partIndex,p=this._partGroups.at(s).parameterIndex;if(t.getParameterValueByIndex(p)>.001){if(i>=0)break;i=s,n=t.getPartOpacityByIndex(o),(n+=e/this._fadeTimeSeconds)>1&&(n=1)}}i<0&&(i=0,n=1);for(s=r;s<r+a;++s){var u=this._partGroups.at(s).partIndex;if(i==s)t.setPartOpacityByIndex(u,n);else{var d=t.getPartOpacityByIndex(u),l=void 0;(1-(l=n<.5?-.5*n/.5+1:.5*(1-n)/.5))*(1-n)>.15&&(l=1-.15/(1-n)),d>l&&(d=l),t.setPartOpacityByIndex(u,d)}}},t}();t.CubismPose=r;var a=function(){function t(t){if(this.parameterIndex=0,this.partIndex=0,this.link=new i,null!=t){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement())this.link.pushBack(e.ptr().clone())}}return t.prototype.assignment=function(t){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement())this.link.pushBack(e.ptr().clone());return this},t.prototype.initialize=function(t){this.parameterIndex=t.getParameterIndex(this.partId),this.partIndex=t.getPartIndex(this.partId),t.setParameterValueByIndex(this.parameterIndex,1)},t.prototype.clone=function(){var e=new t;e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=new i;for(var r=this.link.begin();r.notEqual(this.link.end());r.increment())e.link.pushBack(r.ptr().clone());return e},t}();t.PartData=a}(t||(exports.Live2DCubismFramework=t={}));
},{"../type/csmvector":"UWg4","../live2dcubismframework":"0unu","../utils/cubismjson":"vr2H"}],"eryP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,t=require("../utils/cubismjson"),r=require("../live2dcubismframework"),o=r.Live2DCubismFramework.CubismFramework,a=t.Live2DCubismFramework.CubismJson;exports.Live2DCubismFramework=e,function(e){var t=function(){function e(e,t){this._json=a.create(e,t)}return e.prototype.release=function(){a.delete(this._json)},e.prototype.getUserDataCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("UserDataCount").toInt()},e.prototype.getTotalUserDataSize=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalUserDataSize").toInt()},e.prototype.getUserDataTargetType=function(e){return this._json.getRoot().getValueByString("UserData").getValueByIndex(e).getValueByString("Target").getRawString()},e.prototype.getUserDataId=function(e){return o.getIdManager().getId(this._json.getRoot().getValueByString("UserData").getValueByIndex(e).getValueByString("Id").getRawString())},e.prototype.getUserDataValue=function(e){return this._json.getRoot().getValueByString("UserData").getValueByIndex(e).getValueByString("Value").getRawString()},e}();e.CubismModelUserDataJson=t}(e||(exports.Live2DCubismFramework=e={}));
},{"../utils/cubismjson":"vr2H","../live2dcubismframework":"0unu"}],"dneM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,r=require("./cubismmodeluserdatajson"),t=require("../type/csmstring"),a=require("../type/csmvector"),s=require("../live2dcubismframework"),o=s.Live2DCubismFramework.CubismFramework,i=a.Live2DCubismFramework.csmVector,u=t.Live2DCubismFramework.csmString,n=r.Live2DCubismFramework.CubismModelUserDataJson;exports.Live2DCubismFramework=e,function(e){var r=function(){return function(){}}();e.CubismModelUserDataNode=r;var t=function(){function e(){this._userDataNodes=new i,this._artMeshUserDataNode=new i}return e.create=function(r,t){var a=new e;return a.parseUserData(r,t),a},e.delete=function(e){null!=e&&(e.release(),e=null)},e.prototype.getArtMeshUserDatas=function(){return this._artMeshUserDataNode},e.prototype.parseUserData=function(e,t){for(var a=new n(e,t),s=o.getIdManager().getId("ArtMesh"),i=a.getUserDataCount(),m=0;m<i;m++){var d=new r;d.targetId=a.getUserDataId(m),d.targetType=o.getIdManager().getId(a.getUserDataTargetType(m)),d.value=new u(a.getUserDataValue(m)),this._userDataNodes.pushBack(d),d.targetType==s&&this._artMeshUserDataNode.pushBack(d)}a.release(),a=void 0},e.prototype.release=function(){for(var e=0;e<this._userDataNodes.getSize();++e)this._userDataNodes.set(e,null);this._userDataNodes=null},e}();e.CubismModelUserData=t}(e||(exports.Live2DCubismFramework=e={}));
},{"./cubismmodeluserdatajson":"eryP","../type/csmstring":"qV/H","../type/csmvector":"UWg4","../live2dcubismframework":"0unu"}],"XLA/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var i,s=require("../math/cubismvector2"),t=require("../type/csmvector"),e=t.Live2DCubismFramework.csmVector,n=s.Live2DCubismFramework.CubismVector2;exports.Live2DCubismFramework=i,function(i){!function(i){i[i.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter"}(i.CubismPhysicsTargetType||(i.CubismPhysicsTargetType={})),function(i){i[i.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",i[i.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",i[i.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle"}(i.CubismPhysicsSource||(i.CubismPhysicsSource={}));var s=function(){return function(){this.gravity=new n(0,0),this.wind=new n(0,0)}}();i.PhysicsJsonEffectiveForces=s;var t=function(){return function(){}}();i.CubismPhysicsParameter=t;var r=function(){return function(){}}();i.CubismPhysicsNormalization=r;var u=function(){return function(){this.initialPosition=new n(0,0),this.position=new n(0,0),this.lastPosition=new n(0,0),this.lastGravity=new n(0,0),this.force=new n(0,0),this.velocity=new n(0,0)}}();i.CubismPhysicsParticle=u;var o=function(){return function(){this.normalizationPosition=new r,this.normalizationAngle=new r}}();i.CubismPhysicsSubRig=o;var c=function(){return function(){this.source=new t}}();i.CubismPhysicsInput=c;var a=function(){return function(){this.destination=new t,this.translationScale=new n(0,0)}}();i.CubismPhysicsOutput=a;var h=function(){return function(){this.settings=new e,this.inputs=new e,this.outputs=new e,this.particles=new e,this.gravity=new n(0,0),this.wind=new n(0,0)}}();i.CubismPhysicsRig=h}(i||(exports.Live2DCubismFramework=i={}));
},{"../math/cubismvector2":"LuNH","../type/csmvector":"UWg4"}],"yFWj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,e=require("../utils/cubismjson"),n=require("../math/cubismvector2"),g=require("../live2dcubismframework"),o=g.Live2DCubismFramework.CubismFramework,u=n.Live2DCubismFramework.CubismVector2,i=e.Live2DCubismFramework.CubismJson;exports.Live2DCubismFramework=t,function(t){var e="Meta",n="PhysicsSettings",g=function(){function t(t,e){this._json=i.create(t,e)}return t.prototype.release=function(){i.delete(this._json)},t.prototype.getGravity=function(){var t=new u(0,0);return t.x=this._json.getRoot().getValueByString(e).getValueByString("EffectiveForces").getValueByString("Gravity").getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString(e).getValueByString("EffectiveForces").getValueByString("Gravity").getValueByString("Y").toFloat(),t},t.prototype.getWind=function(){var t=new u(0,0);return t.x=this._json.getRoot().getValueByString(e).getValueByString("EffectiveForces").getValueByString("Wind").getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString(e).getValueByString("EffectiveForces").getValueByString("Wind").getValueByString("Y").toFloat(),t},t.prototype.getSubRigCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("PhysicsSettingCount").toInt()},t.prototype.getTotalInputCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalInputCount").toInt()},t.prototype.getTotalOutputCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("TotalOutputCount").toInt()},t.prototype.getVertexCount=function(){return this._json.getRoot().getValueByString(e).getValueByString("VertexCount").toInt()},t.prototype.getNormalizationPositionMinimumValue=function(t){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Normalization").getValueByString("Position").getValueByString("Minimum").toFloat()},t.prototype.getNormalizationPositionMaximumValue=function(t){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Normalization").getValueByString("Position").getValueByString("Maximum").toFloat()},t.prototype.getNormalizationPositionDefaultValue=function(t){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Normalization").getValueByString("Position").getValueByString("Default").toFloat()},t.prototype.getNormalizationAngleMinimumValue=function(t){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Normalization").getValueByString("Angle").getValueByString("Minimum").toFloat()},t.prototype.getNormalizationAngleMaximumValue=function(t){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Normalization").getValueByString("Angle").getValueByString("Maximum").toFloat()},t.prototype.getNormalizationAngleDefaultValue=function(t){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Normalization").getValueByString("Angle").getValueByString("Default").toFloat()},t.prototype.getInputCount=function(t){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Input").getVector().getSize()},t.prototype.getInputWeight=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Weight").toFloat()},t.prototype.getInputReflect=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Reflect").toBoolean()},t.prototype.getInputType=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Type").getRawString()},t.prototype.getInputSourceId=function(t,e){return o.getIdManager().getId(this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Source").getValueByString("Id").getRawString())},t.prototype.getOutputCount=function(t){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Output").getVector().getSize()},t.prototype.getOutputVertexIndex=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("VertexIndex").toInt()},t.prototype.getOutputAngleScale=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Scale").toFloat()},t.prototype.getOutputWeight=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Weight").toFloat()},t.prototype.getOutputDestinationId=function(t,e){return o.getIdManager().getId(this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Destination").getValueByString("Id").getRawString())},t.prototype.getOutputType=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Type").getRawString()},t.prototype.getOutputReflect=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Output").getValueByIndex(e).getValueByString("Reflect").toBoolean()},t.prototype.getParticleCount=function(t){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Vertices").getVector().getSize()},t.prototype.getParticleMobility=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Mobility").toFloat()},t.prototype.getParticleDelay=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Delay").toFloat()},t.prototype.getParticleAcceleration=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Acceleration").toFloat()},t.prototype.getParticleRadius=function(t,e){return this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Radius").toInt()},t.prototype.getParticlePosition=function(t,e){var g=new u(0,0);return g.x=this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Position").getValueByString("X").toFloat(),g.y=this._json.getRoot().getValueByString(n).getValueByIndex(t).getValueByString("Vertices").getValueByIndex(e).getValueByString("Position").getValueByString("Y").toFloat(),g},t}();t.CubismPhysicsJson=g}(t||(exports.Live2DCubismFramework=t={}));
},{"../utils/cubismjson":"vr2H","../math/cubismvector2":"LuNH","../live2dcubismframework":"0unu"}],"X26E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var i,t=require("./cubismphysicsinternal"),s=require("../math/cubismvector2"),e=require("../math/cubismmath"),a=require("./cubismphysicsjson"),n=a.Live2DCubismFramework.CubismPhysicsJson,o=e.Live2DCubismFramework.CubismMath,r=t.Live2DCubismFramework.CubismPhysicsRig,u=t.Live2DCubismFramework.CubismPhysicsSubRig,p=t.Live2DCubismFramework.CubismPhysicsInput,c=t.Live2DCubismFramework.CubismPhysicsOutput,g=t.Live2DCubismFramework.CubismPhysicsParticle,l=t.Live2DCubismFramework.CubismPhysicsSource,y=t.Live2DCubismFramework.CubismPhysicsTargetType,h=s.Live2DCubismFramework.CubismVector2;exports.Live2DCubismFramework=i,function(i){var t=100,s=function(){function i(){this._physicsRig=null,this._options=new e,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}return i.create=function(t,s){var e=new i;return e.parse(t,s),e._physicsRig.gravity.y=0,e},i.delete=function(i){null!=i&&(i.release(),i=null)},i.prototype.evaluate=function(i,s){var e,a,n,r,u,p,c,g,l,y,m,d,_=new h;l=i.getModel().parameters.values,y=i.getModel().parameters.maximumValues,m=i.getModel().parameters.minimumValues,d=i.getModel().parameters.defaultValues;for(var R=0;R<this._physicsRig.subRigCount;++R){e={angle:0},_.x=0,_.y=0,u=this._physicsRig.settings.at(R),p=this._physicsRig.inputs.get(u.baseInputIndex),c=this._physicsRig.outputs.get(u.baseOutputIndex),g=this._physicsRig.particles.get(u.baseParticleIndex);for(var v=0;v<u.inputCount;++v)a=p[v].weight/t,-1==p[v].sourceParameterIndex&&(p[v].sourceParameterIndex=i.getParameterIndex(p[v].source.id)),p[v].getNormalizedParameterValue(_,e,l[p[v].sourceParameterIndex],m[p[v].sourceParameterIndex],y[p[v].sourceParameterIndex],d[p[v].sourceParameterIndex],u.normalizationPosition,u.normalizationAngle,p[0].reflect,a);n=o.degreesToRadian(-e.angle),_.x=_.x*o.cos(n)-_.y*o.sin(n),_.y=_.x*o.sin(n)+_.y*o.cos(n),C(g,u.particleCount,_,e.angle,this._options.wind,.001*u.normalizationPosition.maximum,s,5);for(v=0;v<u.outputCount;++v){var x=c[v].vertexIndex;if(x<1||x>=u.particleCount)break;-1==c[v].destinationParameterIndex&&(c[v].destinationParameterIndex=i.getParameterIndex(c[v].destination.id));var P=new h;P.x=g[x].position.x-g[x-1].position.x,P.y=g[x].position.y-g[x-1].position.y,r=c[v].getValue(P,g,x,c[v].reflect,this._options.gravity);var b=c[v].destinationParameterIndex,f=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(l.subarray(b))):l.slice(b);w(f,m[b],y[b],r,c[v]);for(var S=b,I=0;S<l.length;S++,I++)l[S]=f[I]}}},i.prototype.setOptions=function(i){this._options=i},i.prototype.getOption=function(){return this._options},i.prototype.release=function(){this._physicsRig=void 0,this._physicsRig=null},i.prototype.parse=function(i,t){this._physicsRig=new r;var s=new n(i,t);this._physicsRig.gravity=s.getGravity(),this._physicsRig.wind=s.getWind(),this._physicsRig.subRigCount=s.getSubRigCount(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,u,!0),this._physicsRig.inputs.updateSize(s.getTotalInputCount(),p,!0),this._physicsRig.outputs.updateSize(s.getTotalOutputCount(),c,!0),this._physicsRig.particles.updateSize(s.getVertexCount(),g,!0);for(var e=0,o=0,h=0,x=0;x<this._physicsRig.settings.getSize();++x){this._physicsRig.settings.at(x).normalizationPosition.minimum=s.getNormalizationPositionMinimumValue(x),this._physicsRig.settings.at(x).normalizationPosition.maximum=s.getNormalizationPositionMaximumValue(x),this._physicsRig.settings.at(x).normalizationPosition.defalut=s.getNormalizationPositionDefaultValue(x),this._physicsRig.settings.at(x).normalizationAngle.minimum=s.getNormalizationAngleMinimumValue(x),this._physicsRig.settings.at(x).normalizationAngle.maximum=s.getNormalizationAngleMaximumValue(x),this._physicsRig.settings.at(x).normalizationAngle.defalut=s.getNormalizationAngleDefaultValue(x),this._physicsRig.settings.at(x).inputCount=s.getInputCount(x),this._physicsRig.settings.at(x).baseInputIndex=e;for(var C=0;C<this._physicsRig.settings.at(x).inputCount;++C)this._physicsRig.inputs.at(e+C).sourceParameterIndex=-1,this._physicsRig.inputs.at(e+C).weight=s.getInputWeight(x,C),this._physicsRig.inputs.at(e+C).reflect=s.getInputReflect(x,C),"X"==s.getInputType(x,C)?(this._physicsRig.inputs.at(e+C).type=l.CubismPhysicsSource_X,this._physicsRig.inputs.at(e+C).getNormalizedParameterValue=a):"Y"==s.getInputType(x,C)?(this._physicsRig.inputs.at(e+C).type=l.CubismPhysicsSource_Y,this._physicsRig.inputs.at(e+C).getNormalizedParameterValue=m):"Angle"==s.getInputType(x,C)&&(this._physicsRig.inputs.at(e+C).type=l.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(e+C).getNormalizedParameterValue=d),this._physicsRig.inputs.at(e+C).source.targetType=y.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(e+C).source.id=s.getInputSourceId(x,C);e+=this._physicsRig.settings.at(x).inputCount,this._physicsRig.settings.at(x).outputCount=s.getOutputCount(x),this._physicsRig.settings.at(x).baseOutputIndex=o;for(C=0;C<this._physicsRig.settings.at(x).outputCount;++C)this._physicsRig.outputs.at(o+C).destinationParameterIndex=-1,this._physicsRig.outputs.at(o+C).vertexIndex=s.getOutputVertexIndex(x,C),this._physicsRig.outputs.at(o+C).angleScale=s.getOutputAngleScale(x,C),this._physicsRig.outputs.at(o+C).weight=s.getOutputWeight(x,C),this._physicsRig.outputs.at(o+C).destination.targetType=y.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(o+C).destination.id=s.getOutputDestinationId(x,C),"X"==s.getOutputType(x,C)?(this._physicsRig.outputs.at(o+C).type=l.CubismPhysicsSource_X,this._physicsRig.outputs.at(o+C).getValue=_,this._physicsRig.outputs.at(o+C).getScale=P):"Y"==s.getOutputType(x,C)?(this._physicsRig.outputs.at(o+C).type=l.CubismPhysicsSource_Y,this._physicsRig.outputs.at(o+C).getValue=R,this._physicsRig.outputs.at(o+C).getScale=b):"Angle"==s.getOutputType(x,C)&&(this._physicsRig.outputs.at(o+C).type=l.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(o+C).getValue=v,this._physicsRig.outputs.at(o+C).getScale=f),this._physicsRig.outputs.at(o+C).reflect=s.getOutputReflect(x,C);o+=this._physicsRig.settings.at(x).outputCount,this._physicsRig.settings.at(x).particleCount=s.getParticleCount(x),this._physicsRig.settings.at(x).baseParticleIndex=h;for(C=0;C<this._physicsRig.settings.at(x).particleCount;++C)this._physicsRig.particles.at(h+C).mobility=s.getParticleMobility(x,C),this._physicsRig.particles.at(h+C).delay=s.getParticleDelay(x,C),this._physicsRig.particles.at(h+C).acceleration=s.getParticleAcceleration(x,C),this._physicsRig.particles.at(h+C).radius=s.getParticleRadius(x,C),this._physicsRig.particles.at(h+C).position=s.getParticlePosition(x,C);h+=this._physicsRig.settings.at(x).particleCount}this.initialize(),s.release(),s=void 0,s=null},i.prototype.initialize=function(){for(var i,t,s,e=0;e<this._physicsRig.subRigCount;++e){t=this._physicsRig.settings.at(e),(i=this._physicsRig.particles.get(t.baseParticleIndex))[0].initialPosition=new h(0,0),i[0].lastPosition=new h(i[0].initialPosition.x,i[0].initialPosition.y),i[0].lastGravity=new h(0,-1),i[0].lastGravity.y*=-1,i[0].velocity=new h(0,0),i[0].force=new h(0,0);for(var a=1;a<t.particleCount;++a)(s=new h(0,0)).y=i[a].radius,i[a].initialPosition=new h(i[a-1].initialPosition.x+s.x,i[a-1].initialPosition.y+s.y),i[a].position=new h(i[a].initialPosition.x,i[a].initialPosition.y),i[a].lastPosition=new h(i[a].initialPosition.x,i[a].initialPosition.y),i[a].lastGravity=new h(0,-1),i[a].lastGravity.y*=-1,i[a].velocity=new h(0,0),i[a].force=new h(0,0)}},i}();i.CubismPhysics=s;var e=function(){return function(){this.gravity=new h(0,0),this.wind=new h(0,0)}}();function a(i,t,s,e,a,n,o,r,u,p){i.x+=S(s,e,a,n,o.minimum,o.maximum,o.defalut,u)*p}function m(i,t,s,e,a,n,o,r,u,p){i.y+=S(s,e,a,n,o.minimum,o.maximum,o.defalut,u)*p}function d(i,t,s,e,a,n,o,r,u,p){t.angle+=S(s,e,a,n,r.minimum,r.maximum,r.defalut,u)*p}function _(i,t,s,e,a){var n=i.x;return e&&(n*=-1),n}function R(i,t,s,e,a){var n=i.y;return e&&(n*=-1),n}function v(i,t,s,e,a){var n;return a=s>=2?t[s-1].position.substract(t[s-2].position):a.multiplyByScaler(-1),n=o.directionToRadian(a,i),e&&(n*=-1),n}function x(i,t){return o.min(i,t)+function(i,t){var s=o.max(i,t),e=o.min(i,t);return o.abs(s-e)}(i,t)/2}function P(i,t){return JSON.parse(JSON.stringify(i.x))}function b(i,t){return JSON.parse(JSON.stringify(i.y))}function f(i,t){return JSON.parse(JSON.stringify(t))}function C(i,t,s,e,a,n,r,u){var p,c,g,l,y=new h(0,0),m=new h(0,0),d=new h(0,0),_=new h(0,0);i[0].position=new h(s.x,s.y),p=o.degreesToRadian(e),(l=o.radianToDirection(p)).normalize();for(var R=1;R<t;++R)i[R].force=l.multiplyByScaler(i[R].acceleration).add(a),i[R].lastPosition=new h(i[R].position.x,i[R].position.y),c=i[R].delay*r*30,y=i[R].position.substract(i[R-1].position),g=o.directionToRadian(i[R].lastGravity,l)/u,y.x=o.cos(g)*y.x-y.y*o.sin(g),y.y=o.sin(g)*y.x+y.y*o.cos(g),i[R].position=i[R-1].position.add(y),m=i[R].velocity.multiplyByScaler(c),d=i[R].force.multiplyByScaler(c).multiplyByScaler(c),i[R].position=i[R].position.add(m).add(d),(_=i[R].position.substract(i[R-1].position)).normalize(),i[R].position=i[R-1].position.add(_.multiplyByScaler(i[R].radius)),o.abs(i[R].position.x)<n&&(i[R].position.x=0),0!=c&&(i[R].velocity=i[R].position.substract(i[R].lastPosition),i[R].velocity=i[R].velocity.divisionByScalar(c),i[R].velocity=i[R].velocity.multiplyByScaler(i[R].mobility)),i[R].force=new h(0,0),i[R].lastGravity=new h(l.x,l.y)}function w(i,s,e,a,n){var o,r;(o=a*n.getScale(n.translationScale,n.angleScale))<s?(o<n.valueBelowMinimum&&(n.valueBelowMinimum=o),o=s):o>e&&(o>n.valueExceededMaximum&&(n.valueExceededMaximum=o),o=e),(r=n.weight/t)>=1?i[0]=o:(o=i[0]*(1-r)+o*r,i[0]=o)}function S(i,t,s,e,a,n,r,u){var p=0,c=o.max(s,t);c<i&&(i=c);var g=o.min(s,t);g>i&&(i=g);var l=o.min(a,n),y=o.max(a,n),h=r,m=x(g,c),d=i-m;switch(function(i){var t=0;return i>0?t=1:i<0&&(t=-1),t}(d)){case 1:var _=y-h;0!=(R=c-m)&&(p=d*(_/R),p+=h);break;case-1:var R;_=l-h;0!=(R=g-m)&&(p=d*(_/R),p+=h);break;case 0:p=h}return u?p:-1*p}i.Options=e}(i||(exports.Live2DCubismFramework=i={}));
},{"./cubismphysicsinternal":"XLA/","../math/cubismvector2":"LuNH","../math/cubismmath":"mMyx","./cubismphysicsjson":"yFWj"}],"lAiA":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0,exports.Live2DCubismFramework=e,function(e){var t=function(){function e(){this._currentTime=0}return e.create=function(){return new e},e.delete=function(e){null!=e&&(e=null)},e.prototype.setParameters=function(e){this._breathParameters=e},e.prototype.getParameters=function(){return this._breathParameters},e.prototype.updateParameters=function(e,t){this._currentTime+=t;for(var r=2*this._currentTime*3.14159,a=0;a<this._breathParameters.getSize();++a){var i=this._breathParameters.at(a);e.addParameterValueById(i.parameterId,i.offset+i.peak*Math.sin(r/i.cycle),i.weight)}},e}();e.CubismBreath=t;var r=function(){return function(e,t,r,a,i){this.parameterId=null==e?null:e,this.offset=null==t?0:t,this.peak=null==r?0:r,this.cycle=null==a?0:a,this.weight=null==i?0:i}}();e.BreathParameterData=r}(e||(exports.Live2DCubismFramework=e={}));
},{}],"JLWS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,t=require("../type/csmvector"),i=t.Live2DCubismFramework.csmVector;exports.Live2DCubismFramework=e,function(e){var t,n=function(){function e(e){if(this._blinkingState=t.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new i,null!=e)for(var n=0;n<e.getEyeBlinkParameterCount();++n)this._parameterIds.pushBack(e.getEyeBlinkParameterId(n))}return e.create=function(t){return void 0===t&&(t=null),new e(t)},e.delete=function(e){null!=e&&(e=null)},e.prototype.setBlinkingInterval=function(e){this._blinkingIntervalSeconds=e},e.prototype.setBlinkingSetting=function(e,t,i){this._closingSeconds=e,this._closedSeconds=t,this._openingSeconds=i},e.prototype.setParameterIds=function(e){this._parameterIds=e},e.prototype.getParameterIds=function(){return this._parameterIds},e.prototype.updateParameters=function(i,n){var s;this._userTimeSeconds+=n;var r=0;switch(this._blinkingState){case t.EyeState_Closing:(r=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds)>=1&&(r=1,this._blinkingState=t.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),s=1-r;break;case t.EyeState_Closed:(r=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds)>=1&&(this._blinkingState=t.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),s=0;break;case t.EyeState_Opening:(r=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds)>=1&&(r=1,this._blinkingState=t.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),s=r;break;case t.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=t.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),s=1;break;case t.EyeState_First:default:this._blinkingState=t.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),s=1}e.CloseIfZero||(s=-s);for(var a=0;a<this._parameterIds.getSize();++a)i.setParameterValueById(this._parameterIds.at(a),s)},e.prototype.determinNextBlinkingTiming=function(){var e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)},e.CloseIfZero=!0,e}();e.CubismEyeBlink=n,function(e){e[e.EyeState_First=0]="EyeState_First",e[e.EyeState_Interval=1]="EyeState_Interval",e[e.EyeState_Closing=2]="EyeState_Closing",e[e.EyeState_Closed=3]="EyeState_Closed",e[e.EyeState_Opening=4]="EyeState_Opening"}(t=e.EyeState||(e.EyeState={}))}(e||(exports.Live2DCubismFramework=e={}));
},{"../type/csmvector":"UWg4"}],"oGk4":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0,exports.Live2DCubismFramework=t,function(t){var i=function(){function t(t,i,e,h){this.x=t,this.y=i,this.width=e,this.height=h}return t.prototype.getCenterX=function(){return this.x+.5*this.width},t.prototype.getCenterY=function(){return this.y+.5*this.height},t.prototype.getRight=function(){return this.x+this.width},t.prototype.getBottom=function(){return this.y+this.height},t.prototype.setRect=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},t.prototype.expand=function(t,i){this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i},t}();t.csmRect=i}(t||(exports.Live2DCubismFramework=t={}));
},{}],"dL4l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var t,e=require("../live2dcubismframework"),i=require("../type/csmrectf"),r=require("./cubismrenderer"),a=require("../math/cubismmatrix44"),s=require("../type/csmmap"),o=require("../type/csmvector"),l=require("../utils/cubismdebug"),n=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),h=e.Live2DCubismFramework.Constant,g=a.Live2DCubismFramework.CubismMatrix44,u=i.Live2DCubismFramework.csmRect,_=s.Live2DCubismFramework.csmMap,d=o.Live2DCubismFramework.csmVector,p=r.Live2DCubismFramework.CubismRenderer,c=r.Live2DCubismFramework.CubismBlendMode,m=r.Live2DCubismFramework.CubismTextureColor;exports.Live2DCubismFramework=t,function(t){var e,i,r,a=function(){function t(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new d,this._clippingContextListForDraw=new d,this._channelColors=new d,this._tmpBoundsOnModel=new u,this._tmpMatrix=new g,this._tmpMatrixForMask=new g,this._tmpMatrixForDraw=new g,this._maskTexture=null;var t=new m;t.R=1,t.G=0,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new m).R=0,t.G=1,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new m).R=0,t.G=0,t.B=1,t.A=0,this._channelColors.pushBack(t),(t=new m).R=0,t.G=0,t.B=0,t.A=1,this._channelColors.pushBack(t)}return t.prototype.getChannelFlagAsColor=function(t){return this._channelColors.at(t)},t.prototype.getMaskRenderTexture=function(){var t=0;if(this._maskTexture&&0!=this._maskTexture.texture&&(this._maskTexture.frameNo=this._currentFrameNo,t=this._maskTexture.texture),0==t){var e=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),t=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,r),this._maskTexture=new s(this._currentFrameNo,t)}return t},t.prototype.setGL=function(t){this.gl=t},t.prototype.calcClippedDrawTotalBounds=function(t,e){for(var i=Number.MAX_VALUE,r=Number.MAX_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE,o=e._clippedDrawableIndexList.length,l=0;l<o;l++){for(var n=e._clippedDrawableIndexList[l],g=t.getDrawableVertexCount(n),u=t.getDrawableVertices(n),_=Number.MAX_VALUE,d=Number.MAX_VALUE,p=Number.MIN_VALUE,c=Number.MIN_VALUE,m=g*h.vertexStep,f=h.vertexOffset;f<m;f+=h.vertexStep){var x=u[f],C=u[f+1];x<_&&(_=x),x>p&&(p=x),C<d&&(d=C),C>c&&(c=C)}if(_!=Number.MAX_VALUE)if(_<i&&(i=_),d<r&&(r=d),p>a&&(a=p),c>s&&(s=c),i==Number.MAX_VALUE)e._allClippedDrawRect.x=0,e._allClippedDrawRect.y=0,e._allClippedDrawRect.width=0,e._allClippedDrawRect.height=0,e._isUsing=!1;else{e._isUsing=!0;var S=a-i,M=s-r;e._allClippedDrawRect.x=i,e._allClippedDrawRect.y=r,e._allClippedDrawRect.width=S,e._allClippedDrawRect.height=M}}},t.prototype.release=function(){for(var t=0;t<this._clippingContextListForMask.getSize();t++)this._clippingContextListForMask.at(t)&&(this._clippingContextListForMask.at(t).release(),this._clippingContextListForMask.set(t,void 0)),this._clippingContextListForMask.set(t,null);this._clippingContextListForMask=null;for(t=0;t<this._clippingContextListForDraw.getSize();t++)this._clippingContextListForDraw.set(t,null);this._clippingContextListForDraw=null,this._maskTexture&&(this.gl.deleteFramebuffer(this._maskTexture.texture),this._maskTexture=null);for(t=0;t<this._channelColors.getSize();t++)this._channelColors.set(t,null);this._channelColors=null,this.gl.deleteTexture(this._colorBuffer),this._colorBuffer=null},t.prototype.initialize=function(t,e,i,r){for(var a=0;a<e;a++)if(r[a]<=0)this._clippingContextListForDraw.pushBack(null);else{var s=this.findSameClip(i[a],r[a]);null==s&&(s=new o(this,i[a],r[a]),this._clippingContextListForMask.pushBack(s)),s.addClippedDrawable(a),this._clippingContextListForDraw.pushBack(s)}},t.prototype.setupClippingContext=function(t,e){this._currentFrameNo++;for(var a=0,s=0;s<this._clippingContextListForMask.getSize();s++){var o=this._clippingContextListForMask.at(s);this.calcClippedDrawTotalBounds(t,o),o._isUsing&&a++}if(a>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture();e.getMvpMatrix();e.preDraw(),this.setupLayoutBounds(a),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(s=0;s<this._clippingContextListForMask.getSize();s++){var l=this._clippingContextListForMask.at(s),n=l._allClippedDrawRect,h=l._layoutBounds;this._tmpBoundsOnModel.setRect(n),this._tmpBoundsOnModel.expand(.05*n.width,.05*n.height);var g=h.width/this._tmpBoundsOnModel.width,u=h.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(h.x,h.y),this._tmpMatrix.scaleRelative(g,u),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(h.x,h.y),this._tmpMatrix.scaleRelative(g,u),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),l._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),l._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());for(var _=l._clippingIdCount,d=0;d<_;d++){var p=l._clippingIdList[d];t.getDrawableDynamicFlagVertexPositionsDidChange(p)&&(e.setIsCulling(0!=t.getDrawableCulling(p)),e.setClippingContextBufferForMask(l),e.drawMesh(t.getDrawableTextureIndices(p),t.getDrawableVertexIndexCount(p),t.getDrawableVertexCount(p),t.getDrawableVertexIndices(p),t.getDrawableVertices(p),t.getDrawableVertexUvs(p),t.getDrawableOpacity(p),c.CubismBlendMode_Normal))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,r),e.setClippingContextBufferForMask(null),this.gl.viewport(i[0],i[1],i[2],i[3])}},t.prototype.findSameClip=function(t,e){for(var i=0;i<this._clippingContextListForMask.getSize();i++){var r=this._clippingContextListForMask.at(i),a=r._clippingIdCount;if(a==e){for(var s=0,o=0;o<a;o++)for(var l=r._clippingIdList[o],n=0;n<a;n++)if(t[n]==l){s++;break}if(s==a)return r}}return null},t.prototype.setupLayoutBounds=function(t){var e=t/4,i=t%4;e=~~e,i=~~i;for(var r=0,a=0;a<4;a++){var s=e+(a<i?1:0);if(0==s);else if(1==s){var o=this._clippingContextListForMask.at(r++);o._layoutChannelNo=a,o._layoutBounds.x=0,o._layoutBounds.y=0,o._layoutBounds.width=1,o._layoutBounds.height=1}else if(2==s)for(var n=0;n<s;n++){h=~~(h=n%2),(u=this._clippingContextListForMask.at(r++))._layoutChannelNo=a,u._layoutBounds.x=.5*h,u._layoutBounds.y=0,u._layoutBounds.width=.5,u._layoutBounds.height=1}else if(s<=4)for(n=0;n<s;n++){h=~~(h=n%2),g=~~(g=n/2),(u=this._clippingContextListForMask.at(r++))._layoutChannelNo=a,u._layoutBounds.x=.5*h,u._layoutBounds.y=.5*g,u._layoutBounds.width=.5,u._layoutBounds.height=.5}else if(s<=9)for(n=0;n<s;n++){var h,g,u;h=~~(h=n%3),g=~~(g=n/3),(u=this._clippingContextListForMask.at(r++))._layoutChannelNo=a,u._layoutBounds.x=h/3,u._layoutBounds.y=g/3,u._layoutBounds.width=1/3,u._layoutBounds.height=1/3}else(0,l.CubismLogError)("not supported mask count : {0}",s)}},t.prototype.getColorBuffer=function(){return this._colorBuffer},t.prototype.getClippingContextListForDraw=function(){return this._clippingContextListForDraw},t.prototype.setClippingMaskBufferSize=function(t){this._clippingMaskBufferSize=t},t.prototype.getClippingMaskBufferSize=function(){return this._clippingMaskBufferSize},t}();t.CubismClippingManager_WebGL=a;var s=function(){return function(t,e){this.frameNo=t,this.texture=e}}();t.CubismRenderTextureResource=s;var o=function(){function t(t,e,i){this._owner=t,this._clippingIdList=e,this._clippingIdCount=i,this._allClippedDrawRect=new u,this._layoutBounds=new u,this._clippedDrawableIndexList=new Array,this._matrixForMask=new g,this._matrixForDraw=new g}return t.prototype.release=function(){null!=this._layoutBounds&&(this._layoutBounds=null),null!=this._allClippedDrawRect&&(this._allClippedDrawRect=null),null!=this._clippedDrawableIndexList&&(this._clippedDrawableIndexList=null)},t.prototype.addClippedDrawable=function(t){this._clippedDrawableIndexList.push(t)},t.prototype.getClippingManager=function(){return this._owner},t.prototype.setGl=function(t){this._owner.setGL(t)},t}();t.CubismClippingContext=o;var f=function(){function i(){this._shaderSets=new d}return i.getInstance=function(){return null==e?e=new i:e},i.deleteInstance=function(){e&&(e.release(),e=null)},i.prototype.release=function(){this.releaseShaderProgram()},i.prototype.setupShaderProgram=function(t,e,i,r,a,s,o,n,h,g,u,_){var d,p,m,f;if(u||(0,l.CubismLogError)("NoPremultipliedAlpha is not allowed"),0==this._shaderSets.getSize()&&this.generateShaders(),null!=t.getClippingContextBufferForMask()){var S=this._shaderSets.at(x.ShaderNames_SetupMask);this.gl.useProgram(S.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(S.samplerTexture0Location,0),null==o.vertex&&(o.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributePositionLocation),this.gl.vertexAttribPointer(S.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==o.uv&&(o.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributeTexCoordLocation),this.gl.vertexAttribPointer(S.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);var M=t.getClippingContextBufferForMask()._layoutChannelNo,b=t.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(M);this.gl.uniform4f(S.uniformChannelFlagLocation,b.R,b.G,b.B,b.A),this.gl.uniformMatrix4fv(S.uniformClipMatrixLocation,!1,t.getClippingContextBufferForMask()._matrixForMask.getArray());var L=t.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(S.uniformBaseColorLocation,2*L.x-1,2*L.y-1,2*L.getRight()-1,2*L.getBottom()-1),d=this.gl.ZERO,p=this.gl.ONE_MINUS_SRC_COLOR,m=this.gl.ZERO,f=this.gl.ONE_MINUS_SRC_ALPHA}else{var v=null!=t.getClippingContextBufferForDraw(),A=v?1:0;S=new C;switch(h){case c.CubismBlendMode_Normal:default:S=this._shaderSets.at(x.ShaderNames_NormalPremultipliedAlpha+A),d=this.gl.ONE,p=this.gl.ONE_MINUS_SRC_ALPHA,m=this.gl.ONE,f=this.gl.ONE_MINUS_SRC_ALPHA;break;case c.CubismBlendMode_Additive:S=this._shaderSets.at(x.ShaderNames_AddPremultipliedAlpha+A),d=this.gl.ONE,p=this.gl.ONE,m=this.gl.ZERO,f=this.gl.ONE;break;case c.CubismBlendMode_Multiplicative:S=this._shaderSets.at(x.ShaderNames_MultPremultipliedAlpha+A),d=this.gl.DST_COLOR,p=this.gl.ONE_MINUS_SRC_ALPHA,m=this.gl.ZERO,f=this.gl.ONE}if(this.gl.useProgram(S.shaderProgram),null==o.vertex&&(o.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributePositionLocation),this.gl.vertexAttribPointer(S.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==o.uv&&(o.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributeTexCoordLocation),this.gl.vertexAttribPointer(S.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),v){this.gl.activeTexture(this.gl.TEXTURE1);var F=t.getClippingContextBufferForDraw().getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,F),this.gl.uniform1i(S.samplerTexture1Location,1),this.gl.uniformMatrix4fv(S.uniformClipMatrixLocation,!1,t.getClippingContextBufferForDraw()._matrixForDraw.getArray());M=t.getClippingContextBufferForDraw()._layoutChannelNo,b=t.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(M);this.gl.uniform4f(S.uniformChannelFlagLocation,b.R,b.G,b.B,b.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(S.samplerTexture0Location,0),this.gl.uniformMatrix4fv(S.uniformMatrixLocation,!1,_.getArray()),this.gl.uniform4f(S.uniformBaseColorLocation,g.R,g.G,g.B,g.A)}null==o.index&&(o.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,o.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,a,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(d,p,m,f)},i.prototype.releaseShaderProgram=function(){for(var t=0;t<this._shaderSets.getSize();t++)this.gl.deleteProgram(this._shaderSets.at(t).shaderProgram),this._shaderSets.at(t).shaderProgram=0,this._shaderSets.set(t,void 0),this._shaderSets.set(t,null)},i.prototype.generateShaders=function(){for(var e=0;e<7;e++)this._shaderSets.pushBack(new C);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcSetupMask,t.fragmentShaderSrcsetupMask),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(t.vertexShaderSrc,t.fragmentShaderSrcPremultipliedAlpha),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcMasked,t.fragmentShaderSrcMaskPremultipliedAlpha),this._shaderSets.at(3).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(4).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture1"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_clipMatrix"),this._shaderSets.at(4).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_channelFlag"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor")},i.prototype.loadShaderProgram=function(t,e){var i=this.gl.createProgram(),r=this.compileShaderSource(this.gl.VERTEX_SHADER,t);if(!r)return(0,l.CubismLogError)("Vertex shader compile error!"),0;var a=this.compileShaderSource(this.gl.FRAGMENT_SHADER,e);return a?(this.gl.attachShader(i,r),this.gl.attachShader(i,a),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.deleteShader(r),this.gl.deleteShader(a),i):((0,l.CubismLogError)("Failed to link program: {0}",i),this.gl.deleteShader(r),r=0,this.gl.deleteShader(a),a=0,i&&(this.gl.deleteProgram(i),i=0),0)):((0,l.CubismLogError)("Vertex shader compile error!"),0)},i.prototype.compileShaderSource=function(t,e){var i=e,r=this.gl.createShader(t);if(this.gl.shaderSource(r,i),this.gl.compileShader(r),!r){var a=this.gl.getShaderInfoLog(r);(0,l.CubismLogError)("Shader compile log: {0} ",a)}return this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(this.gl.deleteShader(r),null)},i.prototype.setGl=function(t){this.gl=t},i}();t.CubismShader_WebGL=f;var x,C=function(){return function(){}}();t.CubismShaderSet=C,function(t){t[t.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",t[t.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",t[t.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",t[t.ShaderNames_AddPremultipliedAlpha=3]="ShaderNames_AddPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipledAlpha=4]="ShaderNames_AddMaskedPremultipledAlpha",t[t.ShaderNames_MultPremultipliedAlpha=5]="ShaderNames_MultPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlpha=6]="ShaderNames_MultMaskedPremultipliedAlpha"}(x=t.ShaderNames||(t.ShaderNames={})),t.vertexShaderSrcSetupMask="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.fragmentShaderSrcsetupMask="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",t.vertexShaderSrc="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.vertexShaderSrcMasked="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.fragmentShaderSrcPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",t.fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}";var S=function(t){function e(){var e=t.call(this)||this;return e._clippingContextBufferForMask=null,e._clippingContextBufferForDraw=null,e._clippingManager=new a,e.firstDraw=!0,e._textures=new _,e._sortedDrawableIndexList=new d,e._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},e._textures.prepareCapacity(32,!0),e}return n(e,t),e.prototype.initialize=function(e){e.isUsingMasking()&&(this._clippingManager=new a,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts())),this._sortedDrawableIndexList.resize(e.getDrawableCount(),0),t.prototype.initialize.call(this,e)},e.prototype.bindTexture=function(t,e){this._textures.setValue(t,e)},e.prototype.getBindedTextures=function(){return this._textures},e.prototype.setClippingMaskBufferSize=function(t){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new a,this._clippingManager.setClippingMaskBufferSize(t),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())},e.prototype.getClippingMaskBufferSize=function(){return this._clippingManager.getClippingMaskBufferSize()},e.prototype.release=function(){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null},e.prototype.doDrawModel=function(){null!=this._clippingManager&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();for(var t=this.getModel().getDrawableCount(),e=this.getModel().getDrawableRenderOrders(),i=0;i<t;++i){var r=e[i];this._sortedDrawableIndexList.set(r,i)}for(i=0;i<t;++i){var a=this._sortedDrawableIndexList.at(i);this.getModel().getDrawableDynamicFlagIsVisible(a)&&(this.setClippingContextBufferForDraw(null!=this._clippingManager?this._clippingManager.getClippingContextListForDraw().at(a):null),this.setIsCulling(this.getModel().getDrawableCulling(a)),this.drawMesh(this.getModel().getDrawableTextureIndices(a),this.getModel().getDrawableVertexIndexCount(a),this.getModel().getDrawableVertexCount(a),this.getModel().getDrawableVertexIndices(a),this.getModel().getDrawableVertices(a),this.getModel().getDrawableVertexUvs(a),this.getModel().getDrawableOpacity(a),this.getModel().getDrawableBlendMode(a)))}},e.prototype.drawMesh=function(t,e,i,r,a,s,o,l){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);var n,h=this.getModelColor();null==this.getClippingContextBufferForMask()&&(h.A*=o,this.isPremultipliedAlpha()&&(h.R*=h.A,h.G*=h.A,h.B*=h.A)),n=null!=this._textures.getValue(t)?this._textures.getValue(t):null,f.getInstance().setupShaderProgram(this,n,i,a,r,s,this._bufferData,o,l,h,this.isPremultipliedAlpha(),this.getMvpMatrix()),this.gl.drawElements(this.gl.TRIANGLES,e,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)},e.doStaticRelease=function(){f.deleteInstance()},e.prototype.setRenderState=function(t,e){r=t,i=e},e.prototype.preDraw=function(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)},e.prototype.setClippingContextBufferForMask=function(t){this._clippingContextBufferForMask=t},e.prototype.getClippingContextBufferForMask=function(){return this._clippingContextBufferForMask},e.prototype.setClippingContextBufferForDraw=function(t){this._clippingContextBufferForDraw=t},e.prototype.getClippingContextBufferForDraw=function(){return this._clippingContextBufferForDraw},e.prototype.startUp=function(t){this.gl=t,this._clippingManager.setGL(t),f.getInstance().setGl(t)},e}(p);t.CubismRenderer_WebGL=S,p.staticRelease=function(){S.doStaticRelease()}}(t||(exports.Live2DCubismFramework=t={}));
},{"../live2dcubismframework":"0unu","../type/csmrectf":"oGk4","./cubismrenderer":"ttDA","../math/cubismmatrix44":"pAzm","../type/csmmap":"MeuK","../type/csmvector":"UWg4","../utils/cubismdebug":"NrMG"}],"nu5/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0;var e,t=require("../live2dcubismframework"),i=require("../motion/cubismmotionmanager"),r=require("../math/cubismtargetpoint"),o=require("../math/cubismmodelmatrix"),s=require("./cubismmoc"),n=require("../motion/cubismmotion"),a=require("../motion/cubismexpressionmotion"),l=require("../effect/cubismpose"),u=require("./cubismmodeluserdata"),m=require("../physics/cubismphysics"),h=require("../effect/cubismbreath"),c=require("../effect/cubismeyeblink"),d=require("../rendering/cubismrenderer_WebGL"),_=require("../utils/cubismdebug"),p=d.Live2DCubismFramework.CubismRenderer_WebGL,b=c.Live2DCubismFramework.CubismEyeBlink,g=h.Live2DCubismFramework.CubismBreath,f=t.Live2DCubismFramework.Constant,M=m.Live2DCubismFramework.CubismPhysics,y=u.Live2DCubismFramework.CubismModelUserData,v=l.Live2DCubismFramework.CubismPose,C=a.Live2DCubismFramework.CubismExpressionMotion,x=n.Live2DCubismFramework.CubismMotion,D=s.Live2DCubismFramework.CubismMoc,w=o.Live2DCubismFramework.CubismModelMatrix,k=r.Live2DCubismFramework.CubismTargetPoint,L=i.Live2DCubismFramework.CubismMotionManager;exports.Live2DCubismFramework=e,function(e){var t=function(){function e(){this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new L,this._motionManager.setEventCallback(e.cubismDefaultMotionEventCallback,this),this._expressionManager=new L,this._dragManager=new k}return e.prototype.isInitialized=function(){return this._initialized},e.prototype.setInitialized=function(e){this._initialized=e},e.prototype.isUpdating=function(){return this._updating},e.prototype.setUpdating=function(e){this._updating=e},e.prototype.setDragging=function(e,t){this._dragManager.set(e,t)},e.prototype.setAcceleration=function(e,t,i){this._accelerationX=e,this._accelerationY=t,this._accelerationZ=i},e.prototype.getModelMatrix=function(){return this._modelMatrix},e.prototype.setOpacity=function(e){this._opacity=e},e.prototype.getOpacity=function(){return this._opacity},e.prototype.loadModel=function(e){this._moc=D.create(e),this._model=this._moc.createModel(),this._model.saveParameters(),null!=this._moc&&null!=this._model?this._modelMatrix=new w(this._model.getCanvasWidth(),this._model.getCanvasHeight()):(0,_.CubismLogError)("Failed to CreateModel().")},e.prototype.loadMotion=function(e,t,i){return x.create(e,t)},e.prototype.loadExpression=function(e,t,i){return C.create(e,t)},e.prototype.loadPose=function(e,t){this._pose=v.create(e,t)},e.prototype.loadUserData=function(e,t){this._modelUserData=y.create(e,t)},e.prototype.loadPhysics=function(e,t){this._physics=M.create(e,t)},e.prototype.isHit=function(e,t,i){var r=this._model.getDrawableIndex(e);if(r<0)return!1;for(var o=this._model.getDrawableVertexCount(r),s=this._model.getDrawableVertices(r),n=s[0],a=s[0],l=s[1],u=s[1],m=1;m<o;++m){var h=s[f.vertexOffset+m*f.vertexStep],c=s[f.vertexOffset+m*f.vertexStep+1];h<n&&(n=h),h>a&&(a=h),c<l&&(l=c),c>u&&(u=c)}var d=this._modelMatrix.invertTransformX(t),_=this._modelMatrix.invertTransformY(i);return n<=d&&d<=a&&l<=_&&_<=u},e.prototype.getModel=function(){return this._model},e.prototype.getRenderer=function(){return this._renderer},e.prototype.createRenderer=function(){this._renderer&&this.deleteRenderer(),this._renderer=new p,this._renderer.initialize(this._model)},e.prototype.deleteRenderer=function(){null!=this._renderer&&(this._renderer.release(),this._renderer=null)},e.prototype.motionEventFired=function(e){(0,_.CubismLogInfo)("{0}",e.s)},e.cubismDefaultMotionEventCallback=function(e,t,i){null!=i&&i.motionEventFired(t)},e.prototype.release=function(){null!=this._motionManager&&(this._motionManager.release(),this._motionManager=null),null!=this._expressionManager&&(this._expressionManager.release(),this._expressionManager=null),null!=this._moc&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,v.delete(this._pose),b.delete(this._eyeBlink),g.delete(this._breath),this._dragManager=null,M.delete(this._physics),y.delete(this._modelUserData),this.deleteRenderer()},e}();e.CubismUserModel=t}(e||(exports.Live2DCubismFramework=e={}));
},{"../live2dcubismframework":"0unu","../motion/cubismmotionmanager":"nrbt","../math/cubismtargetpoint":"2JLv","../math/cubismmodelmatrix":"lHRd","./cubismmoc":"OSDL","../motion/cubismmotion":"+zLe","../motion/cubismexpressionmotion":"2mWK","../effect/cubismpose":"/yuA","./cubismmodeluserdata":"dneM","../physics/cubismphysics":"X26E","../effect/cubismbreath":"lAiA","../effect/cubismeyeblink":"JLWS","../rendering/cubismrenderer_WebGL":"dL4l","../utils/cubismdebug":"NrMG"}],"GXN3":[function(require,module,exports) {
"use strict";var a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0,exports.Live2DCubismFramework=a,function(a){a.HitAreaPrefix="HitArea",a.HitAreaHead="Head",a.HitAreaBody="Body",a.PartsIdCore="Parts01Core",a.PartsArmPrefix="Parts01Arm_",a.PartsArmLPrefix="Parts01ArmL_",a.PartsArmRPrefix="Parts01ArmR_",a.ParamAngleX="ParamAngleX",a.ParamAngleY="ParamAngleY",a.ParamAngleZ="ParamAngleZ",a.ParamEyeLOpen="ParamEyeLOpen",a.ParamEyeLSmile="ParamEyeLSmile",a.ParamEyeROpen="ParamEyeROpen",a.ParamEyeRSmile="ParamEyeRSmile",a.ParamEyeBallX="ParamEyeBallX",a.ParamEyeBallY="ParamEyeBallY",a.ParamEyeBallForm="ParamEyeBallForm",a.ParamBrowLY="ParamBrowLY",a.ParamBrowRY="ParamBrowRY",a.ParamBrowLX="ParamBrowLX",a.ParamBrowRX="ParamBrowRX",a.ParamBrowLAngle="ParamBrowLAngle",a.ParamBrowRAngle="ParamBrowRAngle",a.ParamBrowLForm="ParamBrowLForm",a.ParamBrowRForm="ParamBrowRForm",a.ParamMouthForm="ParamMouthForm",a.ParamMouthOpenY="ParamMouthOpenY",a.ParamCheek="ParamCheek",a.ParamBodyAngleX="ParamBodyAngleX",a.ParamBodyAngleY="ParamBodyAngleY",a.ParamBodyAngleZ="ParamBodyAngleZ",a.ParamBreath="ParamBreath",a.ParamArmLA="ParamArmLA",a.ParamArmRA="ParamArmRA",a.ParamArmLB="ParamArmLB",a.ParamArmRB="ParamArmRB",a.ParamHandL="ParamHandL",a.ParamHandR="ParamHandR",a.ParamHairFront="ParamHairFront",a.ParamHairSide="ParamHairSide",a.ParamHairBack="ParamHairBack",a.ParamHairFluffy="ParamHairFluffy",a.ParamShoulderY="ParamShoulderY",a.ParamBustX="ParamBustX",a.ParamBustY="ParamBustY",a.ParamBaseX="ParamBaseX",a.ParamBaseY="ParamBaseY",a.ParamNONE="NONE:"}(a||(exports.Live2DCubismFramework=a={}));
},{}],"yzQW":[function(require,module,exports) {
"use strict";var r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=void 0,exports.Live2DCubismFramework=r,function(r){var e=function(){function r(){}return r.getFormatedString=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return r.replace(/\{(\d+)\}/g,function(r,t){return e[t]})},r.isStartWith=function(r,e){for(var t=0,n=0;"\0"!=e[n];)if("\0"==r[t]||r[t++]!=e[n++])return!1;return!1},r.stringToFloat=function(r,e,t,n){var i=t,o=!1,a=!1,u=0,s=parseInt(r[i]);for(s<0&&(o=!0,i++);i<e;i++){var f=r[i];if(!(0<=parseInt(f)&&parseInt(f)<=9)){if("."==f){a=!0,i++;break}break}u=10*u+(parseInt(f)-0)}if(a)for(var v=.1;i<e&&(0<=(s=255&parseFloat(r[i]))&&s<=9)&&(u+=v*(s-0),v*=.1,s);i++);return i==t?(n[0]=-1,0):(o&&(u=-u),n[0]=i,u)},r}();r.CubismString=e}(r||(exports.Live2DCubismFramework=r={}));
},{}],"o/I2":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t,r=require("../CubismWebSamples/Framework/live2dcubismframework"),i=require("../CubismWebSamples/Framework/model/cubismusermodel"),a=i.Live2DCubismFramework.CubismUserModel,s=require("../CubismWebSamples/Framework/cubismdefaultparameterid"),o=require("../CubismWebSamples/Framework/effect/cubismeyeblink"),m=o.Live2DCubismFramework.CubismEyeBlink,n=require("../CubismWebSamples/Framework/effect/cubismbreath"),u=n.Live2DCubismFramework.CubismBreath,d=n.Live2DCubismFramework.BreathParameterData,l=require("../CubismWebSamples/Framework/type/csmvector"),h=l.Live2DCubismFramework.csmVector,g=require("../CubismWebSamples/Framework/type/csmmap"),p=g.Live2DCubismFramework.csmMap,y=require("../CubismWebSamples/Framework/physics/cubismphysics"),b=y.Live2DCubismFramework.CubismPhysics,c=require("../CubismWebSamples/Framework/motion/cubismmotionqueuemanager"),P=c.Live2DCubismFramework.InvalidMotionQueueEntryHandleValue,k=require("../CubismWebSamples/Framework/utils/cubismstring"),_=k.Live2DCubismFramework.CubismString;!function(e){e[e.PriorityNone=0]="PriorityNone",e[e.PriorityIdle=1]="PriorityIdle",e[e.PriorityNormal=2]="PriorityNormal",e[e.PriorityForce=3]="PriorityForce"}(t||(t={}));var w={Idle:"Idle"},v=function(i){function a(e,t,a){var o=i.call(this)||this;return o.settings=e,o.homeDir=t,o.lastUpdateTime=0,o.idleMotionEnabled=a,o.idParamAngleX=r.Live2DCubismFramework.CubismFramework.getIdManager().getId(s.Live2DCubismFramework.ParamAngleX),o.idParamAngleY=r.Live2DCubismFramework.CubismFramework.getIdManager().getId(s.Live2DCubismFramework.ParamAngleY),o.idParamAngleZ=r.Live2DCubismFramework.CubismFramework.getIdManager().getId(s.Live2DCubismFramework.ParamAngleZ),o.idParamEyeBallX=r.Live2DCubismFramework.CubismFramework.getIdManager().getId(s.Live2DCubismFramework.ParamEyeBallX),o.idParamEyeBallY=r.Live2DCubismFramework.CubismFramework.getIdManager().getId(s.Live2DCubismFramework.ParamEyeBallY),o.idParamBodyAngleX=r.Live2DCubismFramework.CubismFramework.getIdManager().getId(s.Live2DCubismFramework.ParamBodyAngleX),o.lipSyncIds=new h,o.eyeBlinkIds=new h,o.motions=new p,o}return e(a,i),a.prototype.setUpEyeBlink=function(){this.settings.getEyeBlinkParameterCount()<=0||(this._eyeBlink=m.create(this.settings))},a.prototype.setUpBreath=function(){this._breath=u.create();var e=new h;e.pushBack(new d(this.idParamAngleX,0,15,6.5345,.5)),e.pushBack(new d(this.idParamAngleY,0,8,3.5345,.5)),e.pushBack(new d(this.idParamAngleZ,0,10,5.5345,.5)),e.pushBack(new d(this.idParamBodyAngleX,0,4,15.5345,.5)),e.pushBack(new d(r.Live2DCubismFramework.CubismFramework.getIdManager().getId(s.Live2DCubismFramework.ParamBreath),0,.5,3.2345,.5)),this._breath.setParameters(e)},a.prototype.setUpPhysics=function(e){this._physics=b.create(e,e.byteLength)},a.prototype.setUpLipSyncIds=function(){for(var e=this.settings.getLipSyncParameterCount(),t=0;t<e;++t)this.lipSyncIds.pushBack(this.settings.getLipSyncParameterId(t))},a.prototype.setupEyeBlinkIds=function(){for(var e=this.settings.getEyeBlinkParameterCount(),t=0;t<e;++t)this.eyeBlinkIds.pushBack(this.settings.getEyeBlinkParameterId(t))},a.prototype.startRandomMotion=function(e,t){if(0==this.settings.getMotionCount(e))return P;var r=Math.floor(Math.random()*this.settings.getMotionCount(e));return this.startMotion(e,r,t)},a.prototype.startMotion=function(e,r,i){var a=this;if(i==t.PriorityForce)this._motionManager.setReservePriority(i);else if(!this._motionManager.reserveMotion(i))return this._debugMode&&console.error("[APP]can't start motion."),P;var s=this.settings.getMotionFileName(e,r),o=_.getFormatedString("{0}_{1}",e,r),m=this.motions.getValue(o),n=!1;if(null==m){var u=this.homeDir+"/"+s;fetch(u).then(function(e){return e.arrayBuffer()}).then(function(t){var s=t,o=s.byteLength;m=a.loadMotion(s,o,"");var u=a.settings.getMotionFadeInTimeValue(e,r);return u>=0&&m.setFadeInTime(u),(u=a.settings.getMotionFadeOutTimeValue(e,r))>=0&&m.setFadeOutTime(u),m.setEffectIds(a.eyeBlinkIds,a.lipSyncIds),n=!0,s=null,a._motionManager.startMotionPriority(m,n,i)})}return this._debugMode&&console.log("[APP]start motion: [{0}_{1}",e,r),null},a.prototype.update=function(){var e=Date.now();0===this.lastUpdateTime&&(this.lastUpdateTime=e);var r=(e-this.lastUpdateTime)/1e3;this._dragManager.update(r),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY(),this._model.loadParameters();var i=!1;if(this.idleMotionEnabled&&(this._motionManager.isFinished()?this.startRandomMotion(w.Idle,t.PriorityIdle):i=this._motionManager.updateMotion(this._model,r)),this._model.saveParameters(),i||null!=this._eyeBlink&&this._eyeBlink.updateParameters(this._model,r),this._model.addParameterValueById(this.idParamAngleX,30*this._dragX),this._model.addParameterValueById(this.idParamAngleY,30*this._dragY),this._model.addParameterValueById(this.idParamAngleZ,this._dragX*this._dragY*-30),this._model.addParameterValueById(this.idParamBodyAngleX,10*this._dragX),this._model.addParameterValueById(this.idParamEyeBallX,this._dragX),this._model.addParameterValueById(this.idParamEyeBallY,this._dragY),null!=this._breath&&this._breath.updateParameters(this._model,r),null!=this._physics&&this._physics.evaluate(this._model,r),this._lipsync)for(var a=0;a<this.lipSyncIds.getSize();++a)this._model.addParameterValueById(this.lipSyncIds.at(a),0,.8);null!==this._pose&&this._pose.updateParameters(this._model,0),this._model.update(),this.lastUpdateTime=e},a}(a);exports.default=v;
},{"../CubismWebSamples/Framework/live2dcubismframework":"0unu","../CubismWebSamples/Framework/model/cubismusermodel":"nu5/","../CubismWebSamples/Framework/cubismdefaultparameterid":"GXN3","../CubismWebSamples/Framework/effect/cubismeyeblink":"JLWS","../CubismWebSamples/Framework/effect/cubismbreath":"lAiA","../CubismWebSamples/Framework/type/csmvector":"UWg4","../CubismWebSamples/Framework/type/csmmap":"MeuK","../CubismWebSamples/Framework/physics/cubismphysics":"X26E","../CubismWebSamples/Framework/motion/cubismmotionqueuemanager":"weti","../CubismWebSamples/Framework/utils/cubismstring":"yzQW"}],"MEQy":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,s){function i(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,a)}l((n=n.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(a){s=[6,a],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var n=r(require("./AppModel")),o=r(require("./Utils/FileUtil")),s=function(){function r(e,t){this.gl=e,this.rootDir=t,this.loadModelDataAsync=null,this.loadPoseDataAsync=null,this.createTextureAsyncList=[],this.loadPhysicsDataAsync=null}return r.prototype.setModel=function(e){return""===e?(console.error("moc3ファイルが見つかりません"),this):(this.loadModelDataAsync=o.default.loadAsArrayBufferAsync(this.rootDir+"/"+e),this)},r.prototype.setTextures=function(e){var t=this;return 0===e.length?(console.error("テクスチャファイルを指定してください"),this):(e.forEach(function(e){return t.createTextureAsyncList.push(t.createTextureAsync(t.rootDir+"/"+e,t.gl))}),this)},r.prototype.setPose=function(e){return""===e?(console.error("ポーズ設定ファイルがありません"),this):(this.loadPoseDataAsync=o.default.loadAsArrayBufferAsync(this.rootDir+"/"+e),this)},r.prototype.setPhysics=function(e){return""===e?(console.error("物理演算設定ファイルがありません"),this):(this.loadPhysicsDataAsync=o.default.loadAsArrayBufferAsync(this.rootDir+"/"+e),this)},r.prototype.buildAsync=function(r){return e(this,void 0,Promise,function(){var e,o,s,i,a,l;return t(this,function(t){switch(t.label){case 0:return r?this.loadModelDataAsync?0===this.createTextureAsyncList.length?(console.error("テクスチャを設定してください"),[2,null]):[4,Promise.all([this.loadModelDataAsync,Promise.all(this.createTextureAsyncList.slice()),this.loadPoseDataAsync?this.loadPoseDataAsync:new ArrayBuffer(0),this.loadPhysicsDataAsync?this.loadPhysicsDataAsync:new ArrayBuffer(0)])]:(console.error("moc3を設定してください"),[2,null]):(console.error("モデル設定ファイルがありません"),[2,null]);case 1:return e=t.sent(),o=e[0],s=e[1],i=e[2],a=e[3],(l=new n.default(r,this.rootDir,!0)).loadModel(o),i.byteLength>0&&l.loadPose(i,i.byteLength),a.byteLength>0&&l.loadPhysics(a,a.byteLength),l.createRenderer(),s.forEach(function(e,t){l.getRenderer().bindTexture(t,e)}),l.getRenderer().setIsPremultipliedAlpha(!0),l.getRenderer().startUp(this.gl),l.setUpEyeBlink(),l.setUpBreath(),l.setUpLipSyncIds(),l.setupEyeBlinkIds(),[2,l]}})})},r.prototype.createTextureAsync=function(r,n){return e(this,void 0,Promise,function(){return t(this,function(e){return[2,new Promise(function(e,t){var o=new Image;o.onload=function(){var t=n.createTexture();return n.bindTexture(n.TEXTURE_2D,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,o),n.generateMipmap(n.TEXTURE_2D),e(t)},o.onerror=function(e){return console.log(""+e)},o.src=r})]})})},r}();exports.AppModelBuilder=s;
},{"./AppModel":"o/I2","./Utils/FileUtil":"6EdT"}],"YjAI":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))(function(r,o){function n(t){try{l(s.next(t))}catch(e){o(e)}}function a(t){try{l(s.throw(t))}catch(e){o(e)}}function l(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(n,a)}l((s=s.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var i,s,r,o,n={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,s&&(r=2&o[0]?s.return:o[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,o[1])).done)return r;switch(s=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,s=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(!(r=(r=n.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){n=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){n.label=o[1];break}if(6===o[0]&&n.label<r[1]){n.label=r[1],r=o;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(o);break}r[2]&&n.ops.pop(),n.trys.pop();continue}o=e.call(t,n)}catch(a){o=[6,a],s=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var s=require("../CubismWebSamples/Framework/cubismmodelsettingjson"),r=s.Live2DCubismFramework.CubismModelSettingJson,o=require("../CubismWebSamples/Framework/math/cubismmatrix44"),n=o.Live2DCubismFramework.CubismMatrix44,a=require("../CubismWebSamples/Framework/math/cubismviewmatrix"),l=a.Live2DCubismFramework.CubismViewMatrix,h=i(require("./Utils/FileUtil")),c=require("./AppModelBuilder"),u=function(){function i(t){var e=this;this.transformViewY=function(t,i){var s=e.deviceToScreen.transformY(t);return i.invertTransformY(s)},this.gl=t,this.models={},this.modelsInfo={},this.frameBuffer=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this.viewport=[0,0,this.gl.canvas.width,this.gl.canvas.height],this.projectionMatrix=new n,this.deviceToScreen=new n,this.viewMatrixList={},this.ratio=this.gl.canvas.height/this.gl.canvas.width,this.bottom=-this.ratio,this.top=this.ratio,this.left=-1,this.right=1,this.init()}return i.prototype.createModelAsync=function(i){return t(this,void 0,Promise,function(){var t,s,o,n,a,u,d,g,f,m,p;return e(this,function(e){switch(e.label){case 0:return""===i.model3JsonPath?(console.error(".model3.jsonファイルのパスを指定してください。"),[2,""]):(t=i.model3JsonPath,s=t.match(/(^.*\/?)\/.*/),o=s?s[1]:".",[4,h.default.loadAsArrayBufferAsync(t).catch(function(t){return console.log(t),null})]);case 1:if(null===(n=e.sent()))return[2,""];for(a=new r(n,n.byteLength),u=[],d=0;d<a.getTextureCount();d++)u.push(a.getTextureFileName(d));return[4,new c.AppModelBuilder(this.gl,o).setModel(a.getModelFileName()).setTextures(u).setPose(a.getPoseFileName()).setPhysics(a.getPhysicsFileName()).buildAsync(a)];case 2:return(g=e.sent())?(g.getModelMatrix().scaleRelative(i.scale,i.scale),f=t.match(/\/?(\w*)\.model3\.json/),m=f?f[1]:Date.now().toString(),this.models[m]&&(m+="_"+Date.now().toString()),this.models[m]=g,this.modelsInfo[m]=i,(p=new l).setMaxScale(2),p.setMinScale(.8),p.setMaxScreenRect(-2,2,-2,2),p.setScreenRect(this.left,this.right,this.bottom,this.top),p.loadIdentity(),p.scale(g.getModelMatrix().getScaleX(),g.getModelMatrix().getScaleY()),p.translate(g.getModelMatrix().getTranslateX(),g.getModelMatrix().getTranslateY()),this.viewMatrixList[m]=p,[2,m]):(console.error("モデルの作成に失敗しました"),[2,""])}})})},i.prototype.getModelIds=function(){return Object.keys(this.models)},i.prototype.getModel=function(t){return this.models[t]?this.models[t]:null},i.prototype.removeModel=function(t){this.models[t]&&this.modelsInfo[t]&&(this.models[t].deleteRenderer(),delete this.models[t],delete this.modelsInfo[t],delete this.viewMatrixList[t])},i.prototype.draw=function(){var t=this;this.gl&&(this.gl.clearColor(0,0,0,0),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.clearDepth(1),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),Object.keys(this.models).forEach(function(e){t.models[e].getRenderer().setRenderState(t.frameBuffer,t.viewport),t.models[e].update(),t.models[e].getRenderer().drawModel()}),this.gl.flush())},i.prototype.resize=function(t,e){t||(t=this.gl.canvas.clientWidth),e||(e=this.gl.canvas.clientHeight),this.ratio=e/t,this.top=this.ratio,this.bottom=-this.ratio;for(var i=0,s=this.getModelIds();i<s.length;i++){var r=s[i],o=this.getModel(r),n=this.modelsInfo[r];if(o){this.projectionMatrix.loadIdentity();var a=o.getModelMatrix();a.translate(n.pos.x,n.pos.y);var l=o.getModel().getModel().canvasinfo,h=l.CanvasHeight/l.CanvasWidth;h>1?e/t<h?this.projectionMatrix.scale(e/t,1):this.projectionMatrix.scale(h,h*t/e):t/e>(h=1/h)?(a.translate(0,0),a.scale(n.scale,n.scale),a.translate(n.pos.x,n.pos.y),this.projectionMatrix.scale(e/t,1)):this.projectionMatrix.scale(h,h*t/e),this.projectionMatrix.multiplyByMatrix(a),o.getRenderer().setMvpMatrix(this.projectionMatrix);var c=this.viewMatrixList[r];c.setScreenRect(this.left,this.right,this.bottom,this.top),c.loadIdentity(),c.scale(o.getModelMatrix().getScaleX(),o.getModelMatrix().getScaleY()),c.translate(o.getModelMatrix().getTranslateX(),o.getModelMatrix().getTranslateY())}}this.viewport[2]=t,this.viewport[3]=e},i.prototype.lookAt=function(t,e){for(var i=this.gl.canvas.getBoundingClientRect(),s=t-i.left,r=e-i.top,o=0,n=Object.keys(this.models);o<n.length;o++){var a=n[o],l=this.models[a],h=this.viewMatrixList[a],c=this.transformViewX(s,h),u=this.transformViewY(r,h);l.setDragging(c,u)}},i.prototype.lookAtOrigin=function(){for(var t=0,e=Object.keys(this.models);t<e.length;t++){var i=e[t];this.models[i].setDragging(0,0)}},i.prototype.init=function(){this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.clearColor(0,0,0,0),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.deviceToScreen.loadIdentity();var t=Math.abs(this.left-this.right),e=this.gl.canvas.width<this.gl.canvas.height?t/this.gl.canvas.width:t/this.gl.canvas.height;this.deviceToScreen.scaleRelative(e,-e),this.deviceToScreen.translateRelative(.5*-this.gl.canvas.width,.5*-this.gl.canvas.height)},i.prototype.transformViewX=function(t,e){var i=this.deviceToScreen.transformX(t);return e.invertTransformX(i)},i}();exports.default=u;
},{"../CubismWebSamples/Framework/cubismmodelsettingjson":"A4Ig","../CubismWebSamples/Framework/math/cubismmatrix44":"pAzm","../CubismWebSamples/Framework/math/cubismviewmatrix":"/4HT","./Utils/FileUtil":"6EdT","./AppModelBuilder":"MEQy"}],"7Q+m":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function a(e){try{r(o.next(e))}catch(t){s(t)}}function l(e){try{r(o.throw(e))}catch(t){s(t)}}function r(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,l)}r((o=o.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,o,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var o=n(require("./ModelView")),i=function(){function n(e){this.modelInfoList=[],this.modelView=null,this.glCanvas=null;var t={model3JsonPath:"",pos:{x:0,y:0},scale:1};if(e.dataset.model3json){t.model3JsonPath=e.dataset.model3json,t.pos={x:e.dataset.x?+(""+e.dataset.x):0,y:e.dataset.y?+(""+e.dataset.y):0},t.scale=e.dataset.scale?+(""+e.dataset.scale):4,this.modelInfoList.push(t),this.glCanvas=document.createElement("canvas"),this.glCanvas.width=e.dataset.width?+(""+e.dataset.width):512,this.glCanvas.height=e.dataset.height?+(""+e.dataset.height):512,e.appendChild(this.glCanvas);var n=this.glCanvas.getContext("webgl");n?this.modelView=new o.default(n):console.error("WebGL未対応のブラウザです")}else console.error(".model3.jsonファイルのパスを指定してください")}return n.prototype.createAsync=function(){return e(this,void 0,void 0,function(){var e;return t(this,function(t){switch(t.label){case 0:if(!this.modelView)return console.log("ModelViewが存在しません"),[2];e=0,t.label=1;case 1:return e<this.modelInfoList.length?[4,this.modelView.createModelAsync(this.modelInfoList[e])]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return this.modelView.resize(),[2]}})})},n.prototype.draw=function(){this.modelView?this.modelView.draw():console.log("ModelViewが存在しません")},n.prototype.lookAt=function(e,t){this.glCanvas?this.modelView?this.modelView.lookAt(e,t):console.error("ModelViewが存在しません"):console.error("canvasがありません")},n.prototype.lookAtOrigin=function(){this.modelView?this.modelView.lookAtOrigin():console.error("ModelViewが存在しません")},n.prototype.resize=function(e,t){this.glCanvas?(e||(e=this.glCanvas.clientWidth),t||(t=this.glCanvas.clientHeight),this.glCanvas.width===e&&this.glCanvas.height===t||(this.modelView?(window.devicePixelRatio>1&&(e*=window.devicePixelRatio,t*=window.devicePixelRatio),this.glCanvas.width=e,this.glCanvas.height=t,this.modelView.resize(e,t)):console.error("ModelViewが存在しません"))):console.error("canvasがありません")},n.prototype.setEyeTrackingEnabled=function(e){if(this.glCanvas){if(e)return this.glCanvas.addEventListener("touchmove",this.touchMoveHanlder.bind(this)),this.glCanvas.addEventListener("touchend",this.touchEndHandler.bind(this)),this.glCanvas.addEventListener("mousemove",this.touchMoveHanlder.bind(this)),void this.glCanvas.addEventListener("mouseleave",this.touchEndHandler.bind(this));this.glCanvas.removeEventListener("touchmove",this.touchMoveHanlder.bind(this)),this.glCanvas.removeEventListener("touchend",this.touchEndHandler.bind(this)),this.glCanvas.removeEventListener("mousemove",this.touchMoveHanlder.bind(this)),this.glCanvas.removeEventListener("mouseleave",this.touchEndHandler.bind(this))}else console.error("canvasがありません")},n.prototype.touchMoveHanlder=function(e){e.touches?this.lookAt(e.touches[0].clientX,e.touches[0].clientY):this.lookAt(e.clientX,e.clientY)},n.prototype.touchEndHandler=function(){this.lookAtOrigin()},n}();exports.default=i;
},{"./ModelView":"YjAI"}],"ZCfc":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function u(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this;Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../CubismWebSamples/Framework/live2dcubismframework"),o=n(require("./ModelWidget"));document.addEventListener("DOMContentLoaded",function(){return e(r,void 0,void 0,function(){var e,n,r;return t(this,function(t){switch(t.label){case 0:return 0===(e=document.getElementsByClassName("cubism-widget")).length?(console.error("cubism-widget要素の取得に失敗しました"),[2]):(i.Live2DCubismFramework.CubismFramework.startUp(),i.Live2DCubismFramework.CubismFramework.initialize(),[4,(n=new o.default(e[0])).createAsync()]);case 1:return t.sent(),n.setEyeTrackingEnabled(!0),r=function(){n.draw(),requestAnimationFrame(r)},requestAnimationFrame(r),n.resize(),window.addEventListener("resize",function(){n.resize()}),[2]}})})}),document.addEventListener("close",function(){console.log("Close"),i.Live2DCubismFramework.CubismFramework.dispose()});
},{"../CubismWebSamples/Framework/live2dcubismframework":"0unu","./ModelWidget":"7Q+m"}]},{},["ZCfc"], "cubismwidget")
//# sourceMappingURL=/main.js.map